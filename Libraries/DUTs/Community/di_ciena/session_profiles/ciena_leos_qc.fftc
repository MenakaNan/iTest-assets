<?xml version="1.0"?>
<testCase version="6.0.0.18638fa">
    <general>
        <documentation>Quickcall library for leos ciena devices</documentation>
        <isProcedureLibrary>true</isProcedureLibrary>
        <sessionClass includeTestCase="true" sessionType="ciena_leos_ref_telnet.ffsp"/>
    </general>
    <procedures>
        <item name="main">
            <steps>
                <item guid="69baddc6-3310-4f4e-80de-66f630a1e51c" action="comment">
                    <command>
                        <body>General comment before library</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
            </steps>
        </item>
        <item name="add_cfm_mep" isPublic="true">
            <steps>
                <item guid="c014ca26-a216-42f2-a5b1-33919b00188c" action="command" session="$session">
                    <command>
                        <body>cfm md create md $md level $level</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="807dd190-fdad-456b-9a97-83db775ea352" action="command" session="$session">
                    <command>
                        <body>cfm service create vlan $svlan name &quot;${md}$ma&quot; md $md ma-name-string $ma</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="9cd17851-b1c8-4a63-a738-24934024a594" action="command" session="$session">
                    <command>
                        <body>cfm service set service &quot;${md}$ma&quot; ccm-interval ${ccm_interval}sec</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="6634887d-0332-4ed8-8628-cc6c7df8be53" action="command" session="$session">
                    <command>
                        <body>cfm service enable service &quot;${md}$ma&quot;</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="3856351b-d5fd-4095-bd81-f3260254b462" action="if">
                    <command>
                        <body>([string toupper $service_type] == &quot;EWS&quot;) || ([string toupper $service_type] == &quot;PBS&quot;)</body>
                    </command>
                    <nestedSteps>
                        <item guid="2e5bb8b8-dde1-4fca-b5fb-63f7e7fe09e3" action="then">
                            <nestedSteps>
                                <item guid="e6605a88-147d-42c1-a018-c52d7f1e5479" action="command" session="$session">
                                    <command>
                                        <body>cfm mep create service &quot;${md}$ma&quot; port $port type up mepid $mep_id</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                        <item guid="e29c7a26-1397-4def-962e-5cec516b4b2e" action="elseif">
                            <command>
                                <body>([string toupper $service_type] == &quot;ERS&quot;) || ([string toupper $service_type] == &quot;VBS&quot;)</body>
                            </command>
                            <nestedSteps>
                                <item guid="0d06161d-c03a-4f05-96c5-07d6cc5e7159" action="command" session="$session">
                                    <command>
                                        <body>cfm mep create service &quot;${md}$ma&quot; port $port vlan $cvlan type up mepid $mep_id</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                        <item guid="81c74934-a07f-4ab1-8944-257660bf40c2" action="elseif">
                            <command>
                                <body>[string toupper $service_type] == &quot;FBS&quot;</body>
                            </command>
                            <nestedSteps>
                                <item guid="510cc4e3-7f1c-427a-82de-105f1808d07d" action="command" session="$session">
                                    <command>
                                        <body>cfm mep create service &quot;${md}$ma&quot; port $port vlan 2 type up mepid $mep_id</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="974c1235-8f7b-488e-bd28-21edc4299e11" action="command" session="$session">
                    <command>
                        <body>cfm mep set service &quot;${md}$ma&quot; local-mepid $mep_id ccm-priority $ccm_priority</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="46f532c7-5c1a-4203-923b-7e086a564fcb" action="command" session="$session">
                    <command>
                        <body>conf save</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
            </steps>
            <arguments>
                <item name="md"/>
                <item name="ma"/>
                <item name="level"/>
                <item name="ccm_interval"/>
                <item name="svlan"/>
                <item name="cvlan"/>
                <item name="service_type"/>
                <item name="port"/>
                <item name="interface">
                    <defaultValue>2</defaultValue>
                </item>
                <item name="mep_id"/>
                <item name="ccm_priority">
                    <defaultValue>6</defaultValue>
                </item>
            </arguments>
        </item>
        <item name="add_mep_1" isPublic="true">
            <steps>
                <item guid="086973d1-204f-4fb8-bd91-b437f0f2b189" action="command" session="$session">
                    <command>
                        <body>cfm service delete service &quot;${md}$ma&quot;</body>
                    </command>
                    <postProcessing>
                        <responseFile inherit="false" sub="true">[gget ${session}_file]</responseFile>
                        <responseHeader inherit="false">###################################</responseHeader>
                        <appendSession inherit="false">true</appendSession>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="91c337d8-2b69-44fa-8f2d-57bf468c5c99" action="command" session="$session">
                    <command>
                        <body>cfm service create vlan $svlan name &quot;${md}$ma&quot; md  ${md} ma-name-string $ma</body>
                    </command>
                    <postProcessing>
                        <responseFile inherit="false" sub="true">[gget ${session}_file]</responseFile>
                        <appendSession inherit="false">true</appendSession>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="fdfd226c-3388-47a6-b647-913f37db1df1" action="command" session="$session">
                    <command>
                        <body>cfm service set service  &quot;${md}$ma&quot;  ccm-interval ${ccm_interval}sec</body>
                    </command>
                    <postProcessing>
                        <responseFile inherit="false" sub="true">[gget ${session}_file]</responseFile>
                        <appendSession inherit="false">true</appendSession>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="9bbcab2a-9b92-4d09-8d59-15282f12be8b" action="if">
                    <command>
                        <body>([string toupper $service_type] == &quot;EWS&quot;) || ([string toupper $service_type] == &quot;PBS&quot;)</body>
                    </command>
                    <nestedSteps>
                        <item guid="22f1e4b3-38cd-4294-9ca8-3f9e2d2942ad" action="then">
                            <nestedSteps>
                                <item guid="ebee8053-39d6-4ba2-8083-aa2be0ce63ff" action="command" session="$session">
                                    <command>
                                        <body>cfm mep create service &quot;${md}$ma&quot; port $port type up mepid $mep_id</body>
                                    </command>
                                    <postProcessing>
                                        <responseFile inherit="false" sub="true">[gget ${session}_file]</responseFile>
                                        <appendSession inherit="false">true</appendSession>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                        <item guid="64a6f569-96dd-448a-9e84-c9862af90cfc" action="elseif">
                            <command>
                                <body>([string toupper $service_type] == &quot;ERS&quot;) || ([string toupper $service_type] == &quot;VBS&quot;)</body>
                            </command>
                            <nestedSteps>
                                <item guid="76b594f6-ea63-4fd3-9d71-c324ae5ea77e" action="command" session="$session">
                                    <command>
                                        <body>cfm mep create service &quot;${md}$ma&quot; port $port vlan $cvlan type up mepid $mep_id</body>
                                    </command>
                                    <postProcessing>
                                        <responseFile inherit="false" sub="true">[gget ${session}_file]</responseFile>
                                        <appendSession inherit="false">true</appendSession>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                        <item guid="989aa8fb-e2df-44b1-813a-19f369bf1dbe" action="elseif">
                            <command>
                                <body>[string toupper $service_type] == &quot;FBS&quot;</body>
                            </command>
                            <nestedSteps>
                                <item guid="930eebdd-c639-406f-8efb-8a39803d3055" action="command" session="$session">
                                    <command>
                                        <body>cfm mep create service &quot;${md}$ma&quot; port $port vlan 2 type up mepid $mep_id</body>
                                    </command>
                                    <postProcessing>
                                        <responseFile inherit="false" sub="true">[gget ${session}_file]</responseFile>
                                        <appendSession inherit="false">true</appendSession>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="b6830006-f026-47de-ac75-6a47aad8fc91" action="command" session="$session">
                    <command>
                        <body>cfm mep set service &quot;${md}$ma&quot; local-mepid $mep_id ccm-priority $ccm_priority</body>
                    </command>
                    <postProcessing>
                        <responseFile inherit="false" sub="true">[gget ${session}_file]</responseFile>
                        <appendSession inherit="false">true</appendSession>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="cc9226af-6e10-439c-9727-fa470a6f279f" action="command" session="$session">
                    <command>
                        <body>cfm service enable service &quot;${md}$ma&quot;</body>
                    </command>
                    <postProcessing>
                        <responseFile inherit="false" sub="true">[gget ${session}_file]</responseFile>
                        <appendSession inherit="false">true</appendSession>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="fc357bca-97a5-4626-ad7e-e63004970474" action="command" session="$session">
                    <command>
                        <body>conf save</body>
                    </command>
                    <postProcessing>
                        <responseFile inherit="false" sub="true">[gget ${session}_file]</responseFile>
                        <appendSession inherit="false">true</appendSession>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
            </steps>
            <arguments>
                <item name="md"/>
                <item name="old_mep_id"/>
                <item name="ma"/>
                <item name="ccm_interval">
                    <defaultValue>10sec</defaultValue>
                    <isMandatory>true</isMandatory>
                </item>
                <item name="svlan"/>
                <item name="cvlan"/>
                <item name="port"/>
                <item name="mep_id"/>
                <item name="ccm_priority">
                    <defaultValue>6</defaultValue>
                </item>
                <item name="service_type"/>
            </arguments>
        </item>
        <item name="cfm_delete_domain" isPublic="true">
            <steps>
                <item guid="bc4ada91-eee8-4525-a12f-b1146b3c04d8" action="command" session="$session">
                    <command>
                        <body>cfm service delete service &quot;${md}$ma&quot;</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="479764eb-db8f-4d5f-90d5-bbdcef2b0aef" action="command" session="$session">
                    <command>
                        <body>cfm md delete md $md</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="b5e5ae5f-a6f6-490e-b0ff-7606089f6f9c" action="command" session="$session">
                    <command>
                        <body>conf save</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
            </steps>
            <arguments>
                <item name="md"/>
                <item name="ma"/>
            </arguments>
        </item>
        <item name="cfm_dmm" isPublic="true">
            <steps>
                <item guid="4b44a898-e85a-471b-9958-60bb7829e758" action="if">
                    <command>
                        <body>$log_report</body>
                    </command>
                    <nestedSteps>
                        <item guid="55e37698-a351-4b6d-b82a-567ae4ef5213" action="then">
                            <nestedSteps>
                                <item guid="02982d18-9bab-411f-9081-e85b6b37db4e" action="command" session="$session">
                                    <command>
                                        <body>cfm delay send service &quot;${md}$ma&quot; local $source_mep_id mep $destination_mep_id count $count priority $priority</body>
                                    </command>
                                    <postProcessing>
                                        <responseFile inherit="false" sub="true">[gget ${session}_file]</responseFile>
                                        <responseHeader inherit="false">###################################</responseHeader>
                                        <appendSession inherit="false">true</appendSession>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                                <item guid="62384812-d017-4af6-9997-b230963f4d05" action="eval">
                                    <command>
                                        <body>set delay [expr [expr $count / 10] + 10]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                                <item guid="ea7f4afb-fd99-4b44-87cd-ca1a1cb5d8c0" action="sleep">
                                    <command>
                                        <body>$delay</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="ce0f1afb-173c-47f4-ace6-025933c92756" action="command" session="$session">
                                    <command>
                                        <body>cfm delay show service &quot;${md}$ma&quot;</body>
                                    </command>
                                    <postProcessing>
                                        <storeResponseAt>delay_results</storeResponseAt>
                                        <responseFile inherit="false" sub="true">[gget ${session}_file]</responseFile>
                                        <responseHeader inherit="false">###################################</responseHeader>
                                        <appendSession inherit="false">true</appendSession>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                        <item guid="64986948-c3ac-414e-af9f-dad2ce35ca99" action="else">
                            <nestedSteps>
                                <item guid="5216d97e-1f73-488c-95e9-d1c2128306a1" action="command" session="$session">
                                    <command>
                                        <body>cfm delay send service &quot;${md}$ma&quot; local $source_mep_id mep $destination_mep_id count $count priority $priority</body>
                                    </command>
                                    <postProcessing>
                                        <appendSession inherit="false">true</appendSession>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                                <item guid="f46f0bd4-1a01-451a-953a-e8549c46ee97" action="eval">
                                    <command>
                                        <body>set delay [expr [expr $count / 10] + 10]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                                <item guid="7d88d1c0-f4b3-4e43-bac4-188497293ead" action="sleep">
                                    <command>
                                        <body>$delay</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="bad06f56-8391-4319-80c1-05219003b6ab" action="command" session="$session">
                                    <command>
                                        <body>cfm delay show service &quot;${md}$ma&quot;</body>
                                    </command>
                                    <postProcessing>
                                        <storeResponseAt>delay_results</storeResponseAt>
                                        <appendSession inherit="false">true</appendSession>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="1f27162f-1014-476f-af24-7107305fd462" action="if">
                    <command>
                        <body>[string toupper [query delay_results Error()]] == &quot;INVALID&quot;</body>
                    </command>
                    <nestedSteps>
                        <item guid="83e2bc25-4825-422c-9d27-4a0e426205cf" action="then">
                            <nestedSteps>
                                <item guid="fc72262d-2c09-4552-968d-e12e2708ff2c" action="write">
                                    <command>
                                        <body>Msg: [query delay_results Error()]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                        <item guid="a5a3bc8a-74dd-4cf5-bdc1-a338bff9331c" action="else">
                            <nestedSteps>
                                <item guid="e0d2cfae-8de2-42db-8906-05edb0d614b6" action="write">
                                    <command>
                                        <body>DMM success rate is: [expr [expr [format &quot;%0.2f&quot; [query delay_results DMM()]] / [format &quot;%0.2f&quot; $count]] * 100]\\r</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="fa6cd621-5c8a-4197-9394-ea464ea34be6" action="if">
                                    <command>
                                        <body>[query delay_results Delay()] &gt; 0 </body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="11c0043e-ba5b-402b-9595-600ba3372b67" action="then">
                                            <nestedSteps>
                                                <item guid="0859f386-0f67-4552-91a4-594767057e54" action="eval">
                                                    <command>
                                                        <body>set flag &quot;OK&quot;</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    <useFieldsInCommand>false</useFieldsInCommand>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            <useFieldsInCommand>false</useFieldsInCommand>
                                        </item>
                                        <item guid="739fd5c2-c334-4638-a467-40ef2c2778ee" action="else">
                                            <nestedSteps>
                                                <item guid="ab22e5dc-996f-40be-ae92-efcdf6133677" action="eval">
                                                    <command>
                                                        <body>set flag &quot;NOK&quot;</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    <useFieldsInCommand>false</useFieldsInCommand>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            <useFieldsInCommand>false</useFieldsInCommand>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                                <item guid="cead94ba-00cf-4f7c-9429-a1b33374f3b7" action="write">
                                    <command>
                                        <body>Delay in us greater than Zero: $flag\\r</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="ed18f0d0-1e42-4883-8dab-ed954732af26" action="write">
                                    <command>
                                        <body>DMR count is: [query delay_results DMR()]\\r</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="871781af-f3b6-4c3f-8cba-74e3fbec21c0" action="write">
                                    <command>
                                        <body>Msg: Valid</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
            </steps>
            <arguments>
                <item name="md"/>
                <item name="priority"/>
                <item name="count"/>
                <item name="destination_mep_id"/>
                <item name="source_mep_id"/>
                <item name="ma"/>
                <item name="log_report">
                    <defaultValue>0</defaultValue>
                </item>
            </arguments>
        </item>
        <item name="cfm_link_trace" isPublic="true">
            <steps>
                <item guid="77b3daeb-568c-4908-923b-310c0573cdbf" action="if">
                    <command>
                        <body>$log_report</body>
                    </command>
                    <nestedSteps>
                        <item guid="6d1870e0-54bc-471e-98a8-06d813745cc4" action="then">
                            <nestedSteps>
                                <item guid="5ce408e9-a259-4e41-8c44-b505e75b7854" action="command" session="$session">
                                    <command>
                                        <body>cfm link send service &quot;${md}$ma&quot; local $source_mep_id mep $destination_mep_id </body>
                                    </command>
                                    <postProcessing>
                                        <responseFile inherit="false" sub="true">[gget ${session}_file]</responseFile>
                                        <responseHeader inherit="false">###################################</responseHeader>
                                        <appendSession inherit="false">true</appendSession>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                                <item guid="9d34cff0-2287-4b64-8caa-f08db2e7e079" action="sleep">
                                    <command>
                                        <body>10</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="ffdb4b54-9ed5-4989-b623-a23d9038fe4d" action="command" session="$session">
                                    <command>
                                        <body>cfm link show service &quot;${md}$ma&quot; mep $source_mep_id</body>
                                    </command>
                                    <postProcessing>
                                        <storeResponseAt>link_results</storeResponseAt>
                                        <responseFile inherit="false" sub="true">[gget ${session}_file]</responseFile>
                                        <responseHeader inherit="false">###################################</responseHeader>
                                        <appendSession inherit="false">true</appendSession>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                        <item guid="279d4522-e7b6-4f2b-9dc1-aef0c74ddb9b" action="else">
                            <nestedSteps>
                                <item guid="6eb417c9-33a1-4e43-97f7-7df304ccce0d" action="command" session="$session">
                                    <command>
                                        <body>cfm link send service &quot;${md}$ma&quot; local $source_mep_id mep $destination_mep_id </body>
                                    </command>
                                    <postProcessing>
                                        <appendSession inherit="false">true</appendSession>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                                <item guid="5e2cab1e-6afc-4772-bcb5-6012b88fb5ab" action="sleep">
                                    <command>
                                        <body>10</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="a2a4d171-6b79-4541-b7d0-43f2483274af" action="command" session="$session">
                                    <command>
                                        <body>cfm link show service &quot;${md}$ma&quot; mep $source_mep_id</body>
                                    </command>
                                    <postProcessing>
                                        <storeResponseAt>link_results</storeResponseAt>
                                        <appendSession inherit="false">true</appendSession>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="f068ff21-5ad1-4fd0-b62e-6d775a7a2099" action="eval">
                    <command>
                        <body>set t_mac_address [query link_results target_mac_address()]</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="ec4761a0-d58d-4642-9495-9a16670eb866" action="eval">
                    <command>
                        <body>set r_mac_address [query link_results remote_mep_mac_address()]</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="e5af817d-3a82-4320-a76b-2358afbfd7fc" action="if">
                    <command>
                        <body>($t_mac_address != &quot;&quot;) &amp;&amp; ($r_mac_address != &quot;&quot;)</body>
                    </command>
                    <nestedSteps>
                        <item guid="041e908f-e893-4d46-89fe-8c64323cf3cf" action="then">
                            <nestedSteps>
                                <item guid="1c49feb7-532f-4518-bf48-5f195a3612d7" action="if">
                                    <command>
                                        <body>[string equal $t_mac_address $r_mac_address] == 1</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="d2fcb620-39f4-43b2-9281-1f250ae65261" action="then">
                                            <nestedSteps>
                                                <item guid="8b379f6f-d934-410d-bf33-36f9c8864b52" action="eval">
                                                    <command>
                                                        <body>set flag &quot;OK&quot;</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    <useFieldsInCommand>false</useFieldsInCommand>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            <useFieldsInCommand>false</useFieldsInCommand>
                                        </item>
                                        <item guid="537855df-2937-49e6-9c31-b15ba44e3127" action="else">
                                            <nestedSteps>
                                                <item guid="bafb7577-8a7d-484b-a656-e3f4872f7506" action="eval">
                                                    <command>
                                                        <body>set flag &quot;NOK&quot;</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    <useFieldsInCommand>false</useFieldsInCommand>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            <useFieldsInCommand>false</useFieldsInCommand>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                        <item guid="3d2e3b7a-331a-4752-8c30-876a37c22eeb" action="else">
                            <nestedSteps>
                                <item guid="6fe305b2-e031-4dec-9126-32c97c9e63df" action="eval">
                                    <command>
                                        <body>set flag &quot;NOK&quot;</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="adb1c704-34b0-46e7-808b-511f5046efc6" action="write">
                    <command>
                        <body>Link trace: $flag</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <arguments>
                <item name="md"/>
                <item name="destination_mep_id"/>
                <item name="source_mep_id"/>
                <item name="ma"/>
                <item name="log_report">
                    <defaultValue>0</defaultValue>
                </item>
            </arguments>
        </item>
        <item name="cfm_lmm" isPublic="true">
            <steps>
                <item guid="972c96d5-d53d-4175-88c0-5dc0e8dc6a2e" action="if">
                    <command>
                        <body>$log_report</body>
                    </command>
                    <nestedSteps>
                        <item guid="d6c25c9c-56b0-44eb-b121-c12287b9714b" action="then">
                            <nestedSteps>
                                <item guid="6ce99ee7-87ee-4aca-b73d-efc0a49e362a" action="command" session="$session">
                                    <command>
                                        <body>cfm frame send service &quot;${md}$ma&quot; local $source_mep_id mep $destination_mep_id count $count priority $priority</body>
                                    </command>
                                    <postProcessing>
                                        <responseFile inherit="false" sub="true">[gget ${session}_file]</responseFile>
                                        <responseHeader inherit="false">###################################</responseHeader>
                                        <appendSession inherit="false">true</appendSession>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                                <item guid="df6e22f6-9edc-4cec-a642-08013163809e" action="eval">
                                    <command>
                                        <body>set delay [expr [expr $count / 10] + 10]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                                <item guid="1a63a834-69a4-4bec-8745-eb1621099632" action="sleep">
                                    <command>
                                        <body>$delay</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="45f39416-3cc2-4def-9319-c57b95a0e773" action="command" session="$session">
                                    <command>
                                        <body>cfm frame-loss show service &quot;${md}$ma&quot;</body>
                                    </command>
                                    <postProcessing>
                                        <storeResponseAt>frame_results</storeResponseAt>
                                        <responseFile inherit="false" sub="true">[gget ${session}_file]</responseFile>
                                        <responseHeader inherit="false">###################################</responseHeader>
                                        <appendSession inherit="false">true</appendSession>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                        <item guid="1bf87bc6-2314-498b-8d2d-c19126ab19b5" action="else">
                            <nestedSteps>
                                <item guid="2f5a8ecb-95f4-4c7f-b034-31f8f323163c" action="command" session="$session">
                                    <command>
                                        <body>cfm frame send service &quot;${md}$ma&quot; local $source_mep_id mep $destination_mep_id count $count priority $priority</body>
                                    </command>
                                    <postProcessing>
                                        <appendSession inherit="false">true</appendSession>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                                <item guid="8795e09f-81fd-4e5c-875c-5d15e8b5fe6d" action="eval">
                                    <command>
                                        <body>set delay [expr [expr $count / 10] + 10]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                                <item guid="ae1b4b9a-d7c4-4ab8-9e3b-11ecd12d7faf" action="sleep">
                                    <command>
                                        <body>$delay</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="1c90ded4-4bd2-48de-9dd4-ec82c38b9328" action="command" session="$session">
                                    <command>
                                        <body>cfm frame-loss show service &quot;${md}$ma&quot;</body>
                                    </command>
                                    <postProcessing>
                                        <storeResponseAt>frame_results</storeResponseAt>
                                        <appendSession inherit="false">true</appendSession>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="673f5ec6-1420-4a56-9a4f-93540d97a7ee" action="if">
                    <command>
                        <body>[string toupper [query frame_results Error()]] == &quot;INVALID&quot;</body>
                    </command>
                    <nestedSteps>
                        <item guid="734d4ddd-e234-4a94-aecb-d3cd901d3b1a" action="then">
                            <nestedSteps>
                                <item guid="d962db40-a353-4e44-809c-dafc1a559784" action="write">
                                    <command>
                                        <body>Msg: [query frame_results Error()]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                        <item guid="e0ada71c-ffc1-4e84-8c40-0a80c3f6f7f7" action="else">
                            <nestedSteps>
                                <item guid="b741eefd-da32-4ffe-8dc0-00d1f0a6ac2f" action="write">
                                    <command>
                                        <body>LMM success rate is: [expr [expr [format &quot;%0.2f&quot; [query frame_results LMM_all()]] / [format &quot;%0.2f&quot; $count]] * 100]\\r</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="5058b790-e247-42d7-b4d6-23b4306a3b44" action="eval">
                                    <command>
                                        <body>set lmr_loss_total [expr [expr [query frame_results LMR_all()] + [query frame_results Loss_near_all()]] + [query frame_results Loss_far_all()]]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                                <item guid="46080f92-0a0e-4750-8484-16d64b768af2" action="write">
                                    <command>
                                        <body>LMR success rate is: [expr [expr [format &quot;%0.2f&quot; $lmr_loss_total] / [format &quot;%0.2f&quot; $count]] * 100]\\r</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="b0e7fdc9-eb2d-42c4-82b0-0c75f58a4ec8" action="write">
                                    <command>
                                        <body>LMR count is: [query frame_results LMR_all()]\\r</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="318312d4-458a-4e18-9335-a9c1c97d862e" action="write">
                                    <command>
                                        <body>Msg: Valid</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
            </steps>
            <arguments>
                <item name="md"/>
                <item name="priority"/>
                <item name="count"/>
                <item name="destination_mep_id"/>
                <item name="source_mep_id"/>
                <item name="ma"/>
                <item name="log_report">
                    <defaultValue>0</defaultValue>
                </item>
            </arguments>
        </item>
        <item name="cfm_cleanup" isPublic="true">
            <steps>
                <item guid="ac3a6864-05d9-4591-a3d0-12fae08471a3" action="for">
                    <command>
                        <body>{set vpls_counter 0} {$vpls_counter &lt; $no_instances } {incr vpls_counter}</body>
                    </command>
                    <nestedSteps>
                        <item guid="f81f992b-00f8-4a59-842d-bd24d3702a9f" action="if">
                            <command>
                                <body>$level == 3</body>
                            </command>
                            <nestedSteps>
                                <item guid="4d176ca2-8eb2-4460-93c5-88659cad9860" action="then">
                                    <nestedSteps>
                                        <item guid="8e8a501f-dc7e-4ee1-9ab2-5bb5b33ae0cc" action="eval">
                                            <command>
                                                <body>set tmp_service_number [expr [expr $service_number + $vpls_counter] + $service_number_increment]</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            <useFieldsInCommand>false</useFieldsInCommand>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                                <item guid="a23aa55a-508f-4722-af4e-87215fd790bd" action="else">
                                    <nestedSteps>
                                        <item guid="9469d65e-b94a-4dad-aebb-a6eaac6932a2" action="eval">
                                            <command>
                                                <body>set tmp_service_number [expr $service_number + $vpls_counter]</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            <useFieldsInCommand>false</useFieldsInCommand>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                        <item guid="e35d11ff-4cd0-476f-97de-f90a90ba3803" action="eval">
                            <command>
                                <body>set md &quot;$service_name:$tmp_service_number-${level}&quot;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                        <item guid="f24e3821-9759-4d5f-9c4e-030c7af35426" action="comment">
                            <command>
                                <body>CFM MIP Cleanup on $session</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="none">
                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                        </extractorInfo>
                                        <processorInfo ruleType="message">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                <message>MEPs Cleanup &quot;$md&quot; on $session</message>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                        <item guid="48262018-99a4-405f-97fc-94eceb69b826" action="cfm_delete_domain" session="$session">
                            <command>
                                <body>-md $md -ma $ma -level $level</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                            <advancedProperties defaultSessionProfile="project://di_ciena/session_profiles/ciena_saos_ref_telnet.ffsp"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
            </steps>
            <arguments>
                <item name="no_instances"/>
                <item name="level"/>
                <item name="service_number"/>
                <item name="service_number_increment"/>
                <item name="ma"/>
                <item name="service_name"/>
            </arguments>
        </item>
        <item name="cfm_setup" isPublic="true">
            <steps>
                <item guid="df635106-0332-4198-a11f-4142f43f0ea2" action="for">
                    <command>
                        <body>{set vpls_counter 0} {$vpls_counter &lt; $no_instances } {incr vpls_counter}</body>
                    </command>
                    <nestedSteps>
                        <item guid="5a6a4361-6e49-49b7-98ba-ab282e7ff28e" action="eval">
                            <command>
                                <body>set tmp_svlan [expr $svlan + $vpls_counter]</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                        <item guid="85ca79e2-72e7-4f7b-b68a-e545ca75acc1" action="eval">
                            <command>
                                <body>set tmp_mep_id [expr $mep_id + $vpls_counter]</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                        <item guid="26bb2ab2-91be-496d-9ed6-31e898cfed5f" action="if">
                            <command>
                                <body>$level == 3</body>
                            </command>
                            <nestedSteps>
                                <item guid="41620608-4115-44af-b03f-b77488fa210e" action="then">
                                    <nestedSteps>
                                        <item guid="cbeeede4-de38-46ad-9a3b-87daa949038b" action="eval">
                                            <command>
                                                <body>set tmp_service_number [expr [expr $service_number + $vpls_counter] + $service_number_increment]</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            <useFieldsInCommand>false</useFieldsInCommand>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                                <item guid="11798146-ed93-498c-9245-62ec39a22ad5" action="else">
                                    <nestedSteps>
                                        <item guid="30285730-b5a9-4210-bb6d-200df54ff6f5" action="eval">
                                            <command>
                                                <body>set tmp_service_number [expr $service_number + $vpls_counter]</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            <useFieldsInCommand>false</useFieldsInCommand>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                        <item guid="03400974-f0fa-4da4-8ede-0426b28d714e" action="eval">
                            <command>
                                <body>set md &quot;$service_name:$tmp_service_number-${level}&quot;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                        <item guid="70d60f29-2b05-4400-b22c-0140464e3b8d" action="if">
                            <command>
                                <body>[string toupper $service_type] == &quot;ERS&quot; || [string toupper $service_type] == &quot;VBS&quot;</body>
                            </command>
                            <nestedSteps>
                                <item guid="3cbcff73-cd34-4d67-ab7e-7ec2f878909b" action="then">
                                    <nestedSteps>
                                        <item guid="398ff74e-ea8e-4791-9fab-019e6bf65a38" action="eval">
                                            <command>
                                                <body>set tmp_cvlan [expr $cvlan + $vpls_counter]</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            <useFieldsInCommand>false</useFieldsInCommand>
                                        </item>
                                        <item guid="e1ce5e03-d4ac-4bbc-8afd-953236a898ec" action="comment">
                                            <command>
                                                <body>Setting up MEPs on $session</body>
                                            </command>
                                            <postProcessing>
                                                <analysisRules>
                                                    <item>
                                                        <extractorInfo extractorType="none">
                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="message">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                <message>Setting up MEPs &quot;$md&quot; on $session</message>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                </analysisRules>
                                            </postProcessing>
                                            <nestedSteps>
                                                <item guid="339a4afc-0279-4c4d-9abe-5f7ec69b9c83" action="add_cfm_mep" session="$session">
                                                    <command>
                                                        <body>-md $md -ma $ma -level $level -ccm_interval $ccm_interval -svlan $tmp_svlan -cvlan $tmp_cvlan -interface $interface -mep_id $tmp_mep_id -port $port -ccm_priority $ccm_priority -service_type $service_type</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                    <useFieldsInCommand>false</useFieldsInCommand>
                                                    <advancedProperties defaultSessionProfile="project://di_ciena/session_profiles/ciena_saos_ref_telnet.ffsp"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            <useFieldsInCommand>false</useFieldsInCommand>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                                <item guid="7cea14e8-e220-441d-ab3e-f07be605b266" action="else">
                                    <nestedSteps>
                                        <item guid="27298ea7-fba6-416d-b11c-77201c863f68" action="comment">
                                            <command>
                                                <body>Setting up MEPs on $session</body>
                                            </command>
                                            <postProcessing>
                                                <analysisRules>
                                                    <item>
                                                        <extractorInfo extractorType="none">
                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="message">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                <message>Setting up MEPs &quot;$md&quot; on $session</message>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                </analysisRules>
                                            </postProcessing>
                                            <nestedSteps>
                                                <item guid="f46a0a01-a688-427e-a7b4-0c310e27de41" action="add_cfm_mep" session="$session">
                                                    <command>
                                                        <body>-md $md -ma $ma -level $level -ccm_interval $ccm_interval -svlan $tmp_svlan -interface $interface -mep_id $tmp_mep_id -port $port -ccm_priority $ccm_priority -service_type $service_type</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                    <useFieldsInCommand>false</useFieldsInCommand>
                                                    <advancedProperties defaultSessionProfile="project://di_ciena/session_profiles/ciena_saos_ref_telnet.ffsp"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            <useFieldsInCommand>false</useFieldsInCommand>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
            </steps>
            <arguments>
                <item name="no_instances"/>
                <item name="cvlan"/>
                <item name="svlan"/>
                <item name="port"/>
                <item name="mep_id"/>
                <item name="level"/>
                <item name="service_number"/>
                <item name="service_name"/>
                <item name="service_number_increment"/>
                <item name="interface"/>
                <item name="ma"/>
                <item name="ccm_interval"/>
                <item name="ccm_priority"/>
                <item name="service_type"/>
            </arguments>
        </item>
        <item name="cfm_slm" isPublic="true">
            <steps>
                <item guid="bedd7594-6216-49d6-bd92-c4309173d6f8" action="if">
                    <command>
                        <body>$log_report</body>
                    </command>
                    <nestedSteps>
                        <item guid="5b947d59-60c3-42eb-8800-a502416714ab" action="then">
                            <nestedSteps>
                                <item guid="2c038611-7e96-4144-94a4-b56cf38a1534" action="command" session="$session">
                                    <command>
                                        <body>cfm synthetic-loss send service &quot;${md}$ma&quot; local $source_mep_id mep $destination_mep_id count $count priority $priority</body>
                                    </command>
                                    <postProcessing>
                                        <responseFile inherit="false" sub="true">[gget ${session}_file]</responseFile>
                                        <responseHeader inherit="false">###################################</responseHeader>
                                        <appendSession inherit="false">true</appendSession>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                                <item guid="3c6c6a69-ecf8-4bb5-b8f0-847f1fad06fc" action="eval">
                                    <command>
                                        <body>set delay [expr [expr $count / 5] + 10]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                                <item guid="d8346e8c-9438-4f5a-831b-6066ed84dd9e" action="sleep">
                                    <command>
                                        <body>$delay</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="ee394486-5664-48e8-909c-a64dc6470da6" action="command" session="$session">
                                    <command>
                                        <body>cfm synthetic-loss show service &quot;${md}$ma&quot;</body>
                                    </command>
                                    <postProcessing>
                                        <storeResponseAt>syn_results</storeResponseAt>
                                        <responseFile inherit="false" sub="true">[gget ${session}_file]</responseFile>
                                        <responseHeader inherit="false">###################################</responseHeader>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                    <responseFilterList inherit="false"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                        <item guid="bee15f81-8f17-4375-ad67-8a8602ed64a1" action="else">
                            <nestedSteps>
                                <item guid="e0de13c9-3f87-44b1-9b55-dad81747be76" action="command" session="$session">
                                    <command>
                                        <body>cfm synthetic-loss send service &quot;${md}$ma&quot; local $source_mep_id mep $destination_mep_id count $count priority $priority</body>
                                    </command>
                                    <postProcessing>
                                        <appendSession inherit="false">true</appendSession>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                                <item guid="02ba0b21-c214-4322-a3ce-d15d0e84dc5b" action="eval">
                                    <command>
                                        <body>set delay [expr [expr $count / 5] + 10]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                                <item guid="a822f9c6-c687-403d-8e7f-815ae1ab8c04" action="sleep">
                                    <command>
                                        <body>$delay</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="ff4ccafc-9f84-4cb6-977e-52b4f786f9f6" action="command" session="$session">
                                    <command>
                                        <body>cfm synthetic-loss show service &quot;${md}$ma&quot;</body>
                                    </command>
                                    <postProcessing>
                                        <storeResponseAt>syn_results</storeResponseAt>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                    <responseFilterList inherit="false"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="9b115345-3850-47cb-9072-a689e99ae7ab" action="if">
                    <command>
                        <body>[string toupper [query syn_results Error()]] == &quot;INVALID&quot;</body>
                    </command>
                    <nestedSteps>
                        <item guid="fd479784-a4c6-47b8-9d6f-e52b4ff88f04" action="then">
                            <nestedSteps>
                                <item guid="6e3b043f-3dd2-42b0-a0e2-6c74aae674c8" action="write">
                                    <command>
                                        <body>Msg: [query syn_results Error()]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                        <item guid="094e5aed-a3ee-405f-9c0a-d717c41e954d" action="elseif">
                            <command>
                                <body>([query syn_results Near_Loss()] == &quot;N/A&quot;) || ([query syn_results Far_Loss()] == &quot;N/A&quot;)</body>
                            </command>
                            <nestedSteps>
                                <item guid="5f582944-c097-482d-b9f7-86a0b8acaab1" action="write">
                                    <command>
                                        <body>Msg: Invalid</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                        <item guid="c4f95360-534f-4392-9e64-cb300eb31812" action="else">
                            <nestedSteps>
                                <item guid="3f3d2e84-4f7c-4792-894e-8472225866c0" action="write">
                                    <command>
                                        <body>SLM success rate is: [expr [expr [format &quot;%0.2f&quot; [query syn_results SLM()]] / [format &quot;%0.2f&quot; $count]] * 100]\\r</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="b4f02b6e-78b8-4d52-980f-0688a588253c" action="eval">
                                    <command>
                                        <body>set near_loss [query syn_results Near_Loss()]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                                <item guid="3267e29e-9cf0-4f71-9ab0-5dee3efd034f" action="eval">
                                    <command>
                                        <body>set far_loss [query syn_results Far_Loss()]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                                <item guid="ad10d8d8-06e4-4392-abd9-e7f4352f47d6" action="eval">
                                    <command>
                                        <body>set slr_loss_total [expr [expr [query syn_results SLR()] + $near_loss] + $far_loss]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                                <item guid="a4d99074-dfdf-4101-95b2-f61fd8b5a0ec" action="write">
                                    <command>
                                        <body>SLR success rate is: [expr [expr [format &quot;%0.2f&quot; $slr_loss_total] / [format &quot;%0.2f&quot; $count]] * 100]\\r</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="491b9e40-94e4-43ab-b8e7-519b5c1d4e19" action="write">
                                    <command>
                                        <body>SLR count is: [query syn_results SLR()]\\r</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="88797e0d-e44f-49e6-ace2-0acd740211c1" action="write">
                                    <command>
                                        <body>Msg: Valid</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
            </steps>
            <arguments>
                <item name="md"/>
                <item name="priority"/>
                <item name="count"/>
                <item name="destination_mep_id"/>
                <item name="source_mep_id"/>
                <item name="ma"/>
                <item name="log_report">
                    <defaultValue>0</defaultValue>
                </item>
            </arguments>
        </item>
        <item name="change_ccm_interval" isPublic="true">
            <steps>
                <item guid="c7e23c02-1384-488c-91a5-140d8f87c72c" action="command" session="$session">
                    <command>
                        <body>cfm service set service &quot;${md}$ma&quot; ccm-interval ${ccm_interval}sec</body>
                    </command>
                    <postProcessing>
                        <responseFile inherit="false" sub="true">[gget ${session}_file]</responseFile>
                        <appendRespToFile inherit="false" defaultValue=""/>
                        <responseHeader inherit="false">###################################</responseHeader>
                        <appendSession inherit="false">true</appendSession>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
            </steps>
            <arguments>
                <item name="md"/>
                <item name="ma"/>
                <item name="ccm_interval"/>
            </arguments>
        </item>
        <item name="check_cfm_service_status" isPublic="true">
            <steps>
                <item guid="6331af5f-64c5-4086-afd4-42afd7ab096e" action="comment">
                    <command>
                        <body>cfm service show service VPLS:2980-4serv </body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="247ccde8-a3c1-4314-a673-7acafc1e0ce1" action="if">
                    <command>
                        <body>$log_report</body>
                    </command>
                    <nestedSteps>
                        <item guid="e9839e4e-f41a-4045-ab23-d74138eed7ea" action="then">
                            <nestedSteps>
                                <item guid="67393827-a879-42ad-a78d-822f34ccd634" action="comment">
                                    <command>
                                        <body>write output to log file</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                                <item guid="672f6963-6071-4011-8551-debd4509ecb0" action="command" session="$session">
                                    <command>
                                        <body>cfm service show service &quot;${md}$ma&quot;</body>
                                    </command>
                                    <postProcessing>
                                        <storeResponseAt>cfm_service_show_service</storeResponseAt>
                                        <responseFile inherit="false" sub="true">[gget ${session}_file]</responseFile>
                                        <appendRespToFile inherit="false" defaultValue=""/>
                                        <responseHeader inherit="false">###################################</responseHeader>
                                        <appendSession inherit="false">true</appendSession>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                    <responseMap>project://di_ciena/response_maps/cfm_service_show_service.ffrm</responseMap>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                        <item guid="df08720a-752a-4632-bcce-85e9971e991c" action="else">
                            <nestedSteps>
                                <item guid="ee104dce-e3bd-447f-8239-6b0bce4febcf" action="command" session="$session">
                                    <command>
                                        <body>cfm service show service &quot;${md}$ma&quot;</body>
                                    </command>
                                    <postProcessing>
                                        <storeResponseAt>cfm_service_show_service</storeResponseAt>
                                        <responseFile inherit="false" sub="true" defaultValue=""/>
                                        <appendRespToFile inherit="false" defaultValue=""/>
                                        <appendSession inherit="false" defaultValue=""/>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                    <responseMap>project://di_ciena/response_maps/cfm_service_show_service.ffrm</responseMap>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="9683d110-68aa-4dda-9459-755bcaf7251b" action="write">
                    <command>
                        <body>The Service Fault is: [query cfm_service_show_service &quot;col3_by_parameter(\\&quot;Service Faults\\&quot;)&quot;]</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <arguments>
                <item name="md"/>
                <item name="ma"/>
                <item name="log_report">
                    <defaultValue>0</defaultValue>
                </item>
            </arguments>
        </item>
        <item name="ciena_login" isPublic="true">
            <description>Quickcall for Juniper login</description>
            <steps>
                <item guid="7b81835a-29e6-4872-bc58-69b3ecf08a5f" action="comment">
                    <command>
                        <body>Login to the juniper router through the  Acme NOC. </body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="ba76360d-8c52-4a17-9dc1-04446f48c169" action="cn_NOC_login" session="$session">
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="75a78fbd-9830-4c8e-a223-1a0037e08c3a" action="call">
                    <command>
                        <body>device_login -session $session -IP $IP</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
            </steps>
            <multilineDescription>Quick call for Juniper devices through the Acme NOC</multilineDescription>
            <arguments>
                <item name="IP">
                    <description>The IP address of the device to telne to</description>
                    <isMandatory>true</isMandatory>
                </item>
            </arguments>
        </item>
        <item name="cleanup" isPublic="true">
            <description>Remove the configuration to restore the DUT</description>
            <steps>
                <item guid="00d4ddae-d7ee-49ee-a5d3-408582fe7f7d" action="comment">
                    <command>
                        <body>Debug - print arguments</body>
                    </command>
                    <nestedSteps>
                        <item guid="dc736579-5b19-469a-a0e9-d130b883d76f" action="eval">
                            <command>
                                <body>puts &quot;$dut_key $nte_key&quot;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="635fb959-8b50-4f87-87fb-df308a2223a0" action="eval">
                    <command>
                        <body>set service_type [query /data/GD(SERVICE_INFO) ServiceType_by_Key(&quot;$dut_key&quot;)] </body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="9de4514e-d340-42a9-b305-b57bec31bf45" action="if">
                    <command>
                        <body>[string match -nocase $service_type EWS]</body>
                    </command>
                    <nestedSteps>
                        <item guid="748c5d52-0ec1-43fc-bbdf-52ea03462485" action="then">
                            <nestedSteps>
                                <item guid="30002560-6143-45ad-8380-48e44dcec134" action="delete_ews" session="$session">
                                    <command>
                                        <body>-uni_port [query /data/GD(CIENA_CSV_RESPONSE) UniPort_by_Key(&quot;$nte_key&quot;)] -nni_port [query /data/GD(CIENA_CSV_RESPONSE) NniPort_by_Key(&quot;$nte_key&quot;)] -svlan [query /data/GD(SERVICE_INFO) Svlan_by_Key(&quot;$dut_key&quot;)] -cir [query /data/GD(SERVICE_INFO) CIR_by_Key(&quot;$dut_key&quot;)]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                        <item guid="6c4b1e15-c3eb-44d6-94e3-58b2f68bc816" action="elseif">
                            <command>
                                <body>[string match -nocase $service_type ERS]</body>
                            </command>
                            <nestedSteps>
                                <item guid="b0cdffc8-e469-42ec-b7bd-10c853a9b263" action="delete_ers" session="$session">
                                    <command>
                                        <body>-uni_port [query /data/GD(CIENA_CSV_RESPONSE) UniPort_by_Key(&quot;$nte_key&quot;)] -nni_port [query /data/GD(CIENA_CSV_RESPONSE) NniPort_by_Key(&quot;$nte_key&quot;)] -svlan [query /data/GD(SERVICE_INFO) Svlan_by_Key(&quot;$dut_key&quot;)] -cvlan [query /data/GD(SERVICE_INFO) Cvlan_by_Key(&quot;$dut_key&quot;)] -cir [query /data/GD(SERVICE_INFO) CIR_by_Key(&quot;$dut_key&quot;)]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                        <item guid="6e1ab93d-7536-479e-8d34-babdb695ec92" action="else">
                            <nestedSteps>
                                <item guid="c3cfb45b-ea1f-4374-9825-8d7385507103" action="comment">
                                    <command>
                                        <body>Error and Abort</body>
                                    </command>
                                    <postProcessing>
                                        <analysisRules>
                                            <item>
                                                <extractorInfo extractorType="none">
                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                </extractorInfo>
                                                <processorInfo ruleType="message">
                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup">
                                                        <message> Invalid Service Type: $service_type</message>
                                                    </ruleProperties>
                                                </processorInfo>
                                            </item>
                                        </analysisRules>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
            </steps>
            <arguments>
                <item name="dut_key">
                    <description>The index into the Juniper global parameters</description>
                    <isMandatory>true</isMandatory>
                </item>
                <item name="nte_key">
                    <description>The key into the Ciena global variable</description>
                    <isMandatory>true</isMandatory>
                </item>
            </arguments>
        </item>
        <item name="cleanup_vpws" isPublic="true">
            <description>Remove the configuration to restore the DUT</description>
            <steps>
                <item guid="4d2dd4bd-4dbd-46a3-82ee-5514636cbaf1" action="comment">
                    <command>
                        <body>Debug - print arguments</body>
                    </command>
                    <nestedSteps>
                        <item guid="d9224c0c-836f-4275-a1d5-e7eda6d13f2f" action="eval">
                            <command>
                                <body>puts &quot;$dut_key $nte_key&quot;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="b10a7587-d875-4486-90c4-c294346c6cc3" action="eval">
                    <command>
                        <body>set service_type [query /data/GD(SERVICE_INFO) ServiceType_by_Key(&quot;$dut_key&quot;)] </body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="0482547f-6394-4ca6-90ba-d2e2bb78dac2" action="if">
                    <command>
                        <body>[string match -nocase $service_type EWS]</body>
                    </command>
                    <nestedSteps>
                        <item guid="9a6c0abc-6cb5-4440-8753-64b7d6e51ddd" action="then">
                            <nestedSteps>
                                <item guid="3e8517d0-6b5d-48e7-83f9-7f860e6d1114" action="delete_ews" session="$session">
                                    <command>
                                        <body>-uni_port [query /data/GD(CIENA_CSV_RESPONSE) UniPort_by_Key(&quot;$nte_key&quot;)] -nni_port [query /data/GD(CIENA_CSV_RESPONSE) NniPort_by_Key(&quot;$nte_key&quot;)] -svlan [query /data/GD(SERVICE_INFO) Svlan_by_Key(&quot;$dut_key&quot;)] -cir [query /data/GD(SERVICE_INFO) CIR_by_Key(&quot;$dut_key&quot;)]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                        <item guid="0ad8bfe7-f7cf-4500-b92e-a2d0dee54b9b" action="elseif">
                            <command>
                                <body>[string match -nocase $service_type ERS]</body>
                            </command>
                            <nestedSteps>
                                <item guid="7a482ab1-3c78-40db-913b-226724ab6d0c" action="eval">
                                    <command>
                                        <body>set bundle_flag [query /data/GD(SERVICE_INFO) Bundle_by_Key(&quot;$dut_key&quot;)]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                    <advancedProperties defaultSessionProfile="project://di_ciena/session_profiles/ciena_ref_telnet.ffsp"/>
                                </item>
                                <item guid="ec0a8c76-a623-4dc3-9d89-51da2c7ce874" action="eval">
                                    <command>
                                        <body>set instances  [query /data/GD(SERVICE_INFO) NoOfInstances_by_Key(&quot;$dut_key&quot;)]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                    <advancedProperties defaultSessionProfile="project://di_ciena/session_profiles/ciena_ref_telnet.ffsp"/>
                                </item>
                                <item guid="bae10361-5fb2-4270-9f14-add819279046" action="eval">
                                    <command>
                                        <body>set svlan [query /data/GD(SERVICE_INFO) Svlan_by_Key(&quot;$dut_key&quot;)]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                    <advancedProperties defaultSessionProfile="project://di_ciena/session_profiles/ciena_ref_telnet.ffsp"/>
                                </item>
                                <item guid="5dc77264-5837-4171-831e-a71327f7f286" action="eval">
                                    <command>
                                        <body>set cvlan [query /data/GD(SERVICE_INFO) Cvlan_by_Key(&quot;$dut_key&quot;)]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                    <advancedProperties defaultSessionProfile="project://di_ciena/session_profiles/ciena_ref_telnet.ffsp"/>
                                </item>
                                <item guid="44078a02-5a9a-4608-b4eb-b9e50e50d26c" action="for">
                                    <command>
                                        <body>{set counter 0} {$counter &lt; $instances} {incr counter}</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="7c79db9e-96ae-4c75-8cb7-7989a968c742" action="eval">
                                            <command>
                                                <body>set cvlan_instance [expr $cvlan + $counter]</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            <useFieldsInCommand>false</useFieldsInCommand>
                                            <advancedProperties defaultSessionProfile="project://di_ciena/session_profiles/ciena_ref_telnet.ffsp"/>
                                        </item>
                                        <item guid="50bc1a2d-fc99-47f5-8003-028a7ee9cfc2" action="if">
                                            <command>
                                                <body>[string match -nocase $bundle_flag N]</body>
                                            </command>
                                            <nestedSteps>
                                                <item guid="0d8a86ed-8e6f-4a79-a6f5-583b3e072f53" action="then">
                                                    <nestedSteps>
                                                        <item guid="67e72458-970d-4fd4-b659-67b128282274" action="eval">
                                                            <command>
                                                                <body>set svlan_instance [expr $svlan + $counter]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                            <useFieldsInCommand>false</useFieldsInCommand>
                                                            <advancedProperties defaultSessionProfile="project://di_ciena/session_profiles/ciena_ref_telnet.ffsp"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    <useFieldsInCommand>false</useFieldsInCommand>
                                                </item>
                                                <item guid="9162bcc1-d18a-4231-8807-53cdc0b63715" action="else">
                                                    <nestedSteps>
                                                        <item guid="f55640c8-fb5f-4c0a-af9c-af5ca16ed1d7" action="eval">
                                                            <command>
                                                                <body>set svlan_instance $svlan</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                            <useFieldsInCommand>false</useFieldsInCommand>
                                                            <advancedProperties defaultSessionProfile="project://di_ciena/session_profiles/ciena_ref_telnet.ffsp"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    <useFieldsInCommand>false</useFieldsInCommand>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            <useFieldsInCommand>false</useFieldsInCommand>
                                        </item>
                                        <item guid="360725fa-3015-4004-b809-72be77752cad" action="delete_ers" session="$session">
                                            <command>
                                                <body>-uni_port [query /data/GD(CIENA_CSV_RESPONSE) UniPort_by_Key(&quot;$nte_key&quot;)] -nni_port [query /data/GD(CIENA_CSV_RESPONSE) NniPort_by_Key(&quot;$nte_key&quot;)] -svlan $svlan_instance -cvlan $cvlan_instance -cir [query /data/GD(SERVICE_INFO) CIR_by_Key(&quot;$dut_key&quot;)]</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                            <useFieldsInCommand>false</useFieldsInCommand>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                        <item guid="48c7f945-95c7-4085-890b-dea43ff23fae" action="else">
                            <nestedSteps>
                                <item guid="4c2f45ba-04de-4d83-aee4-fabb6155667c" action="comment">
                                    <command>
                                        <body>Error and Abort</body>
                                    </command>
                                    <postProcessing>
                                        <analysisRules>
                                            <item>
                                                <extractorInfo extractorType="none">
                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                </extractorInfo>
                                                <processorInfo ruleType="message">
                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup">
                                                        <message> Invalid Service Type: $service_type</message>
                                                    </ruleProperties>
                                                </processorInfo>
                                            </item>
                                        </analysisRules>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
            </steps>
            <arguments>
                <item name="dut_key">
                    <description>The index into the Juniper global parameters</description>
                    <isMandatory>true</isMandatory>
                </item>
                <item name="nte_key">
                    <description>The key into the Ciena global variable</description>
                    <isMandatory>true</isMandatory>
                </item>
            </arguments>
        </item>
        <item name="clear_stats" isPublic="true">
            <steps>
                <item guid="fa3c3e64-30d8-4930-9f57-5c732fdd9180" action="command" session="$session">
                    <command>
                        <body>traffic-profiling  standard-profile clear statistics</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="7518e958-df57-448b-aeec-694753cbe8ab" action="command" session="$session">
                    <command>
                        <body>port clear statistics</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
            </steps>
        </item>
        <item name="cn_create_cfm_ers_service" isPublic="true" defaultSessionProfile="ciena_ref_telnet.ffsp">
            <steps>
                <item guid="5c016798-674f-474d-b7f6-9aa5f8da4284" action="command" session="$ciena_nte">
                    <command>
                        <body>cfm md create md VPLS:${vpls_no}-4  level 4</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="6ee01768-f0db-4829-8bf3-a1dad018a1b3" action="eval">
                    <command>
                        <body>set si [ string length $mepid ]</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="3bcd6f91-e6a9-4e04-a4c1-f6152e8bed84" action="eval">
                    <command>
                        <body>set si [ expr $si -1 ]</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="6274f3c3-c626-4590-9ad1-71b3ae9b0b6f" action="eval">
                    <command>
                        <body>set last [ string index $mepid  $si]</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="d18de68a-4516-4825-96ee-be8bcfd76c9e" action="if">
                    <command>
                        <body>$last != 0 </body>
                    </command>
                    <nestedSteps>
                        <item guid="0f75e643-fecd-44c5-bc84-95925d1622e1" action="then">
                            <nestedSteps>
                                <item guid="b945f8b3-f34a-4621-84b5-0a1a45e75e16" action="eval">
                                    <command>
                                        <body>set service_name &quot; VPLS:$vpls_no-4serv$mepid&quot;</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                        <item guid="09ca664f-ff7f-4adf-8e74-68ce092b6302" action="else">
                            <nestedSteps>
                                <item guid="73c1ee92-593f-421e-ab18-b386f9c53ac5" action="eval">
                                    <command>
                                        <body>set service_name &quot; VPLS:$vpls_no-4serv&quot;</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="7cc071e5-d4a1-4dce-b9d7-efc714a3f37d" action="command" session="$ciena_nte">
                    <command>
                        <body>cfm service create vlan $svlan name $service_name  md VPLS:${vpls_no}-4 ma-name-string serv</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="79e95227-1539-4512-bce7-69878a7d90b3" action="command" session="$ciena_nte">
                    <command>
                        <body>cfm service enable service $service_name </body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="a111da79-22e2-4479-a92e-11206541472d" action="command" session="$ciena_nte">
                    <command>
                        <body>cfm mep create service  $service_name port $uni vlan $cvlan type up mepid $mepid</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="af706abe-c791-4744-9e5a-c1c444bca262" action="command" session="$ciena_nte">
                    <command>
                        <body>cfm service set service  $service_name ccm-interval 10sec</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="100dd8d1-e69b-4071-b2db-77e6b30f3136" action="command" session="$ciena_nte">
                    <command>
                        <body>cfm mep set service  $service_name local-mepid $mepid ccm-priority 6</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="fd48724e-66c6-41e1-a041-5a4864e7e840" action="command" session="$ciena_nte">
                    <command>
                        <body>conf save</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
            </steps>
            <arguments>
                <item name="ciena_nte"/>
                <item name="vpls_no"/>
                <item name="mepid"/>
                <item name="uni"/>
                <item name="svlan"/>
                <item name="up_down">
                    <defaultValue>1</defaultValue>
                </item>
                <item name="cvlan"/>
            </arguments>
        </item>
        <item name="cn_NOC_login" isPublic="true">
            <description>Acme NOC login</description>
            <steps>
                <item guid="20d50857-3c33-4b5d-9737-997c33d34909" action="comment">
                    <command>
                        <body>Login to the Acme NOC. These credentials are taken from the global parameter file.</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="2bf80657-1fde-4d9d-a166-8f4a404001cb" action="command" session="$session">
                    <command>
                        <body>[param nte/userid]</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="46e99c42-0edf-4646-897e-555195d1ae65" action="command" session="$session">
                    <command isEncrypted="true">
                        <body>[param nte/password]</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="2863bb44-eba9-4034-be15-b8bd10ff4aef" action="command" session="$session" normalOffset="3.531" estimatedStepExecutionTime="0.157">
                    <command>
                        <body masked="true">CaK+mWSFs84=</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                        <completionProperties expectedIdleTime="0.157" expectedIdleTime.inherit="false"/>
                    </applicationProperties>
                </item>
                <item guid="5f344c51-3206-4f24-8a09-52e068d4e183" action="command" session="$session" normalOffset="3.531" estimatedStepExecutionTime="0.157">
                    <command>
                        <body masked="true">CaK+mWSFs84=</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                        <completionProperties expectedIdleTime="0.157" expectedIdleTime.inherit="false"/>
                    </applicationProperties>
                </item>
            </steps>
        </item>
        <item name="config_emux" isPublic="true">
            <steps>
                <item guid="c2a0fb47-9487-4200-99cb-68a3987c0d60" action="comment">
                    <command>
                        <body>The procedure configures a Ciena EMUX 3940 and 5140 for the customer vlans.</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="cdc725b6-c2d5-48a5-8b02-8146bfa82939" action="comment">
                    <command>
                        <body>First create the vlan and then add it to the uni and nni ports.</body>
                    </command>
                    <nestedSteps>
                        <item guid="20d23754-06e4-44db-b6e9-6d517e72c096" action="command" session="$session">
                            <command>
                                <body>vlan create vlan $vl1 name vlan$vl1</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                        </item>
                        <item guid="dcc78f26-7b7a-4ca9-bfe7-8c7e334ad6f2" action="command" session="$session">
                            <command>
                                <body>vlan add vlan $vl1  port $uni</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                        </item>
                        <item guid="e9439ad0-549f-43cd-b5e1-0949128007e2" action="command" session="$session">
                            <command>
                                <body>vlan add vlan $vl1  port $nni</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                        </item>
                        <item guid="861c1acf-7ace-4f13-a416-2a0984b3f92a" action="command" session="$session">
                            <command>
                                <body>config save</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
            </steps>
            <arguments>
                <item name="session"/>
                <item name="uni">
                    <isMandatory>true</isMandatory>
                </item>
                <item name="nni">
                    <isMandatory>true</isMandatory>
                </item>
                <item name="vl1"/>
            </arguments>
        </item>
        <item name="config_ers" isPublic="true">
            <steps>
                <item guid="cacea341-376f-4606-a664-7c43f5f45c44" action="comment">
                    <command>
                        <body>**************************************************************</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="cc8eeee1-032e-40e1-8746-e633f6d4a2ac" action="comment">
                    <command>
                        <body>This procedure creates a ers configuration for LEOS Ciena NTE</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="b3fb8a3b-c6c0-4902-9d34-1172758b38cf" action="comment">
                    <command>
                        <body>CIR value is taken from Juniper.csv</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="af0a6c4b-eab5-43c7-bc77-1ed9ac677dfa" action="comment">
                    <command>
                        <body>CIR value is in megabytes. Convert to Kbytes for traffic profiling commands</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="2050618e-2681-4fab-9037-581f55160117" action="comment">
                    <command>
                        <body>**************************************************************</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="389f03f7-120b-4247-b6c2-63d7fc0fb43a" action="comment">
                    <command>
                        <body>Debug - print arguments</body>
                    </command>
                    <nestedSteps>
                        <item guid="fc86b167-0c48-423d-8d14-3304e5ebeed7" action="eval">
                            <command>
                                <body>puts &quot;$element_name $svlan $cvlan&quot;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                        <item guid="6e2efdbd-e0c8-4533-aefb-5fc48d3c22cd" action="eval">
                            <command>
                                <body>puts &quot;$uni_port $nni_port $cir $bundle_flag&quot;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="d4d66823-85c4-4fd0-950e-1647d1b98bf1" action="comment">
                    <command>
                        <body>Use for Counter collection</body>
                    </command>
                    <nestedSteps>
                        <item guid="4b2e608d-ad74-445e-a9d0-d46eb4d6928c" action="eval">
                            <command>
                                <body>lappend NTE_TRAFFIC_PROFILE_${svlan} &quot;ERS-${svlan}-${cir}M&quot;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="e48bfc85-e57a-49c8-b5f1-8fc40af3a41b" action="if">
                    <command>
                        <body>$vpls_counter &gt; 0 &amp;&amp;  [string match -nocase $bundle_flag Y]</body>
                    </command>
                    <nestedSteps>
                        <item guid="cb5d775c-2068-4dcf-86ed-6791f51aa159" action="then">
                            <nestedSteps>
                                <item guid="038c6847-b935-4d16-ba96-5dad7514a55c" action="comment">
                                    <command>
                                        <body>skip otherwise</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                                <item guid="7f560292-850d-426f-b388-e7d73ed2ae9d" action="command" session="$session">
                                    <command>
                                        <body>virtual-switch ethernet add vs ERS-${svlan}-VS port $uni_port vlan $cvlan encap-cos-policy port-inherit</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                                <item guid="94bde745-ad72-4b91-b5b7-52458045dc92" action="eval">
                                    <command>
                                        <body>set cirK  [ expr $cir * 1000]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                                <item guid="731c87d8-32ef-43ba-ba29-83e23c7f1f8f" action="eval">
                                    <command>
                                        <body>set nte_ebs 0</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                                <item guid="9da8f1b1-ea61-49fe-9fb5-16954654ea84" action="getCBS" session="$session">
                                    <command>
                                        <body>-NT $element_name -CIR $cir</body>
                                    </command>
                                    <postProcessing>
                                        <analysisRules>
                                            <item>
                                                <extractorInfo extractorType="query">
                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                        <query>group1()</query>
                                                    </extractorProperties>
                                                </extractorInfo>
                                                <processorInfo ruleType="store">
                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                        <storageLocation>nte_cbs</storageLocation>
                                                    </ruleProperties>
                                                </processorInfo>
                                            </item>
                                        </analysisRules>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                                <item guid="f285f00b-7a9f-427a-9470-c92086adb007" action="command" session="$session">
                                    <command>
                                        <body>traffic-profiling standard-profile create port $uni_port vlan $cvlan  name ERS-${cvlan}-${cir}M cir $cirK PIR  $cirK cbs $nte_cbs ebs $nte_ebs</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                        <item guid="d050e95b-ce47-4968-9435-fb1635a01675" action="else">
                            <nestedSteps>
                                <item guid="1657ce11-eaca-4c9e-8553-caa1569f92f3" action="comment">
                                    <command>
                                        <body>Perform this only if the switch is unbundled and this is is the first bundled one.</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                                <item guid="7ef61192-49fb-4f06-b3f9-7a4eeeac20c0" action="command" session="$session">
                                    <command>
                                        <body>vlan create vlan $svlan  name ERS-${element_name}-${svlan}</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                                <item guid="c5f56aa0-277e-4865-a41e-3b918b4b94a4" action="command" session="$session">
                                    <command>
                                        <body>virtual-circuit ethernet create vc ERS-${svlan}-VC vlan ${svlan}</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                                <item guid="6a1b78a1-470c-4032-8153-90775299d970" action="command" session="$session">
                                    <command>
                                        <body>port set port $uni_port  description uni-port-$uni_port</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                                <item guid="47789e58-0495-4e33-95fe-ebca6162e1dd" action="command" session="$session">
                                    <command>
                                        <body>vlan add vlan $svlan port $nni_port</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                                <item guid="694008d3-b0e1-41fa-9111-f83fe08b25b8" action="command" session="$session">
                                    <command>
                                        <body>virtual-switch ethernet create vs ERS-${svlan}-VS vc ERS-${svlan}-VC</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                                <item guid="4ee4d227-c414-4048-a269-3a561c8f9b64" action="if">
                                    <command>
                                        <body>[string toupper $service] eq &quot;SGOS&quot;</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="99ddf3a4-d387-4dd7-9d31-c00616e1a6d5" action="then">
                                            <nestedSteps>
                                                <item guid="310c4688-fd77-426d-be9c-fc2ed485c99f" action="command" session="$session">
                                                    <command>
                                                        <body>virtual-switch ethernet add vs ERS-${svlan}-VS port $uni_port vlan $cvlan encap-cos-policy fixed encap-fixed-dot1dpri $priority </body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            <useFieldsInCommand>false</useFieldsInCommand>
                                        </item>
                                        <item guid="d9e4f434-f753-40cf-9efd-2c6aab07b43d" action="else">
                                            <nestedSteps>
                                                <item guid="56f6dc60-e669-49dc-b6d7-03c5a8460389" action="command" session="$session">
                                                    <command>
                                                        <body>virtual-switch ethernet add vs ERS-${svlan}-VS port $uni_port vlan $cvlan encap-cos-policy port-inherit</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            <useFieldsInCommand>false</useFieldsInCommand>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                                <item guid="2f43b1d2-e831-429c-a462-5780019dc3fc" action="eval">
                                    <command>
                                        <body>set cirK  [ expr $cir * 1000]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                                <item guid="47bc1a7e-c80f-45a9-86de-1558c31836af" action="eval">
                                    <command>
                                        <body>set nte_ebs 96</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                                <item guid="6da7ae1c-08f7-479a-969a-2ee898fadd90" action="eval" skip="true">
                                    <command>
                                        <body>set nte_cbs 96</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                                <item guid="224f2f10-61d9-4623-8d6f-f14a571c6267" action="getCBS" session="$session">
                                    <command>
                                        <body>-NT $element_name -CIR $cir</body>
                                    </command>
                                    <postProcessing>
                                        <analysisRules>
                                            <item>
                                                <extractorInfo extractorType="query">
                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                        <query>group1()</query>
                                                    </extractorProperties>
                                                </extractorInfo>
                                                <processorInfo ruleType="store">
                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                        <storageLocation>nte_cbs</storageLocation>
                                                    </ruleProperties>
                                                </processorInfo>
                                            </item>
                                        </analysisRules>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                                <item guid="c9fe8626-030e-4455-8cc8-c2096f5403b5" action="comment">
                                    <command>
                                        <body>Both cbs and ebs values are same for 311 v.</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="6da49897-c605-47d6-8c61-ca5317a78d4a" action="eval">
                                            <command>
                                                <body>set nte_ebs $nte_cbs</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            <useFieldsInCommand>false</useFieldsInCommand>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                                <item guid="51150f94-1a1c-444c-840a-9a265dc943d6" action="command" session="$session">
                                    <command>
                                        <body>traffic-profiling standard-profile create port $uni_port vlan $cvlan  name ERS-${cvlan}-${cir}M cir $cirK PIR  $cirK cbs $nte_cbs ebs $nte_ebs</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                                <item guid="d24d84e0-55a0-47c2-bcb0-fc7078f3b877" action="command" session="$session">
                                    <command>
                                        <body>traffic-profiling set port  $uni_port nonconform-standard-profile  drop arp-standard-profile bypass</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                                <item guid="0928dedd-6564-4d81-af36-924180d7882d" action="command" session="$session">
                                    <command>
                                        <body>traffic-profiling enable port $uni_port</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                                <item guid="61b3896a-328f-4bff-b641-19760a13b7a5" action="command" session="$session">
                                    <command>
                                        <body>traffic-profiling set port $uni_port mode standard-vlan</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                                <item guid="bbd5ade2-6aed-4382-9f99-2569a527710c" action="command" session="$session">
                                    <command>
                                        <body>flow learning disable vs ERS-${svlan}-VS </body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                                <item guid="ae39306b-2e6d-49b9-b163-a53ea23484d9" action="command" session="$session" skip="true">
                                    <command>
                                        <body>flow access-control create port $nni_port forward-unlearned on max-dynamic-macs 0</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                                <item guid="7cbb0dc2-c5a6-4025-8405-e617b5fe9d27" action="command" session="$session">
                                    <command>
                                        <body>port set port $uni_port acceptable-frame-type tagged-only</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                                <item guid="67b37ea5-8021-4464-a32a-2fafd46826f3" action="command" session="$session">
                                    <command>
                                        <body>port enable port $uni_port</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="5bb4e1ef-a621-41e5-a08c-d084f0e5fcd1" action="command" session="$session">
                    <command>
                        <body>config save</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="b50d2cc6-4f14-4935-be16-dffaaa07bb88" action="eval">
                    <command>
                        <body>gset  NTE_TRAFFIC_PROFILE_$svlan</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="c2e7ac18-c02c-473c-a767-c9da6fc74338" action="comment">
                    <command>
                        <body>**************************************************************</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="f148cec6-8522-42db-8790-23e74f6c9ab7" action="comment">
                    <command>
                        <body>This procedure changes CIR for an  EWS configuration for SAOS Ciena NTE</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="f01c7093-74af-43b5-97ad-4a3a209de6e0" action="comment">
                    <command>
                        <body>**************************************************************</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
            </steps>
            <arguments>
                <item name="element_name"/>
                <item name="svlan"/>
                <item name="cvlan"/>
                <item name="uni_port"/>
                <item name="nni_port"/>
                <item name="cir"/>
                <item name="bundle_flag"/>
                <item name="vpls_counter">
                    <description>Counter that controls whether all or limited ERS configuration needs to be done.
For multiple VPLS configuration with bundle flag, only CVLAN needs to be incremented.
Some configuration needs to be done only first time
</description>
                    <defaultValue>0</defaultValue>
                </item>
                <item name="service"/>
                <item name="priority"/>
            </arguments>
        </item>
        <item name="config_ews" isPublic="true">
            <steps>
                <item guid="715318a6-2ea2-470d-91bd-1db79e1ef0d9" action="comment">
                    <command>
                        <body>This procedure configures EWS on the LEOS platform - 311v.</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="3f08b01b-7c0e-45b8-b67f-038612f1677b" action="comment">
                    <command>
                        <body>Debug - print arguments</body>
                    </command>
                    <nestedSteps>
                        <item guid="98e68a20-0f98-4a6a-b3ad-cf314e07d14d" action="eval">
                            <command>
                                <body>puts &quot;$uni_port $nni_port $svlan $cir&quot;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="ebef0cd7-15da-498d-b85b-5a99a881b97d" action="command" session="$session">
                    <command>
                        <body>vlan create vlan $svlan name EWS-${element_name}-${svlan}</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="044688f3-5c97-4a75-ad93-1f3859874584" action="command" session="$session">
                    <command>
                        <body>virtual-circuit ethernet create vc EWS-${svlan}-VC vlan $svlan</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="066482ee-b078-4f0e-9d5e-50e26821bb3c" action="command" session="$session">
                    <command>
                        <body>port set port $uni_port  description  &quot;uni-port-${uni_port}&quot;</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="b8daba55-9563-48f5-ae77-0df635b1b221" action="command" session="$session">
                    <command>
                        <body>vlan add vlan $svlan  port $nni_port</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="b8574242-b8d8-4970-b01e-70bc6dcecc3b" action="command" session="$session">
                    <command>
                        <body>virtual-switch ethernet create vs EWS-${svlan}-VS vc EWS-${svlan}-VC</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="9c8197c5-f6f5-4d49-96db-ec8beda6f2cc" action="if">
                    <command>
                        <body>[string toupper $service] eq &quot;SGOS&quot; </body>
                    </command>
                    <nestedSteps>
                        <item guid="a0339db6-ee82-40e4-97ed-95e80269c704" action="then">
                            <nestedSteps>
                                <item guid="b7251143-a87a-4adc-8726-d8f5df083c81" action="command" session="$session">
                                    <command>
                                        <body>virtual-switch ethernet add vs EWS-${svlan}-VS port $uni_port encap-cos-policy fixed encap-fixed-dot1dpri $priority </body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                        <item guid="5d9f30ca-5858-4243-a209-3f9150ac1256" action="else">
                            <nestedSteps>
                                <item guid="ccdebdb7-180c-4068-aee8-8639c6b95960" action="command" session="$session">
                                    <command>
                                        <body>virtual-switch ethernet add vs EWS-${svlan}-VS port $uni_port encap-cos-policy port-inherit</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="98115073-7437-4cff-a6b8-41efd43cce82" action="comment">
                    <command>
                        <body>Get the CBS and EBS based upon the CIR</body>
                    </command>
                    <nestedSteps>
                        <item guid="c1fb37fb-0245-4151-9666-626c45b4b89f" action="getCBS" session="$session">
                            <command>
                                <body>-NT $element_name -CIR $cir</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query>group1()</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="store">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                <storageLocation>nte_cbs</storageLocation>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                                <storeResponseAt>nte_cbs</storeResponseAt>
                                <storeResponseText>true</storeResponseText>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                        <item guid="9f223980-edcf-4fe8-8ebb-48b9e595a28e" action="comment">
                            <command>
                                <body>Both cbs and ebs values are same for 311 v.</body>
                            </command>
                            <nestedSteps>
                                <item guid="c158e4ef-0563-4174-b208-f5ab3c6b42f2" action="eval">
                                    <command>
                                        <body>set nte_ebs $nte_cbs</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="ee20e7f6-392e-4b07-b61b-9677b84c21e8" action="eval" skip="true">
                    <command>
                        <body>set nte_ebs 96</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="4cf2e732-8c11-413b-8d39-32ba9d580742" action="eval" skip="true">
                    <command>
                        <body>set nte_cbs 96</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="7f433d50-c2d8-4c08-a88c-c61ca9445ed7" action="eval">
                    <command>
                        <body>set cirK  [ expr $cir * 1000]</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="765b4ae3-8818-4de5-ad78-957316773d44" action="command" session="$session">
                    <command>
                        <body>traffic-profiling standard-profile create port $uni_port cir $cirK pir  $cirK cbs ${nte_cbs}  ebs ${nte_ebs}  name  EWS-${svlan}-${cir}M </body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="1b50a2b3-ad9f-47b4-b46b-30e8e921d33f" action="eval">
                    <command>
                        <body>lappend NTE_TRAFFIC_PROFILE_${svlan} &quot;EWS-${svlan}-${cir}M&quot;</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="29f01c4f-3101-4eba-aa52-19dd33d18f0b" action="command" session="$session">
                    <command>
                        <body>traffic-profiling set port $uni_port  arp-standard-profile EWS-${svlan}-${cir}M nonconform-standard-profile EWS-${svlan}-${cir}M</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="81f722ee-5411-4818-a0ec-5df6404f2e89" action="command" session="$session">
                    <command>
                        <body>traffic-profiling enable port $uni_port</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="c4a4a716-cc6a-481f-aee0-45188517b5c9" action="command" session="$session">
                    <command>
                        <body>virtual-switch control-protocol-tunneling set vs EWS-${svlan}-VS  tunnel-method transparent transparent-validation off</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="4a5df0dd-3d87-4b10-9ba7-f41af9cb9877" action="command" session="$session">
                    <command>
                        <body>port set port $uni_port acceptable-frame-type all</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="ea8093a9-03e6-4737-9793-92eae32a7611" action="command" session="$session">
                    <command>
                        <body> port set port $uni_port  untagged-data-vs EWS-${svlan}-VS  untagged-ctrl-vs  EWS-${svlan}-VS </body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="181c095a-993a-49da-9c56-f4a852d48180" action="command" session="$session">
                    <command>
                        <body>traffic-profiling enable</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="77669834-1898-47d9-8657-1b8c11efa4fc" action="command" session="$session">
                    <command>
                        <body>port enable port $uni_port</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="ef4acbab-c83d-43ae-b298-dd408dcf0502" action="command" session="$session">
                    <command>
                        <body>conf save</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="0523d3b6-26e5-4545-819d-b53747153eac" action="eval">
                    <command>
                        <body>gset  NTE_TRAFFIC_PROFILE_$svlan</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
            </steps>
            <arguments>
                <item name="element_name">
                    <isMandatory>true</isMandatory>
                </item>
                <item name="svlan">
                    <isMandatory>true</isMandatory>
                </item>
                <item name="uni_port">
                    <isMandatory>true</isMandatory>
                </item>
                <item name="nni_port">
                    <isMandatory>true</isMandatory>
                </item>
                <item name="cir">
                    <isMandatory>true</isMandatory>
                </item>
                <item name="service"/>
                <item name="priority"/>
            </arguments>
        </item>
        <item name="configure_dot1dpri" isPublic="true">
            <steps>
                <item guid="ee02db44-e563-4b5d-a648-54e12215f39c" action="if">
                    <command>
                        <body>[string toupper $service] == &quot;ERS&quot;</body>
                    </command>
                    <nestedSteps>
                        <item guid="26497be1-d0b0-4174-bd1f-d9215c235983" action="then">
                            <nestedSteps>
                                <item guid="8b8c4d9c-a10e-44fb-b3bf-6a44311d58c2" action="command" session="$session">
                                    <command>
                                        <body>virtual-switch ethernet set port $uni_port vs ERS-${svlan}-VS vlan $cvlan encap-cos-policy fixed encap-fixed-dot1dpri $priority</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                        <item guid="8bb01132-f5ae-484b-8751-3580a1de454f" action="else">
                            <nestedSteps>
                                <item guid="37dd0cfb-55e2-455b-95cf-175ea20a7505" action="command" session="$session">
                                    <command>
                                        <body>virtual-switch ethernet set port $uni_port vs EWS-${svlan}-VS encap-cos-policy fixed encap-fixed-dot1dpri $priority</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="998f4d65-76c9-476a-a6e5-51c4a9fa9d25" action="command" session="$session">
                    <command>
                        <body>conf save</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
            </steps>
            <arguments>
                <item name="svlan"/>
                <item name="cvlan">
                    <isMandatory>true</isMandatory>
                </item>
                <item name="service"/>
                <item name="uni_port"/>
                <item name="priority"/>
            </arguments>
        </item>
        <item name="delete_emux" isPublic="true">
            <steps>
                <item guid="69d73628-88db-48ee-9175-78a3e829b231" action="comment">
                    <command>
                        <body>This procedure deletes the configuration on the emux</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="6eb9fecd-6fff-4f64-bd4c-f8ffb31516dc" action="comment">
                    <command>
                        <body>First remove it from the uni and the nni and then delete it.</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="920a2255-6a20-41fe-a4d8-907f4e1777e7" action="command" session="$session">
                    <command>
                        <body>vlan remove vlan $vl1 port $uni</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="d0bdbde0-5fbd-4d91-a248-c68d31a12010" action="command" session="$session">
                    <command>
                        <body>vlan remove vlan $vl1 port $nni</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="09df7979-65fc-4e5d-8324-280bce98aead" action="command" session="$session">
                    <command>
                        <body>vlan delete vlan $vl1 </body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="264949a4-ee6a-478d-946f-d72dfea6ce3a" action="command" session="$session">
                    <command>
                        <body>config save</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
            </steps>
            <arguments>
                <item name="session"/>
                <item name="uni">
                    <isMandatory>true</isMandatory>
                </item>
                <item name="nni">
                    <isMandatory>true</isMandatory>
                </item>
                <item name="vl1">
                    <isMandatory>true</isMandatory>
                </item>
            </arguments>
        </item>
        <item name="delete_ers" isPublic="true">
            <steps>
                <item guid="bce9b3dd-6fdc-4a8c-bf8f-793ca2c89dbd" action="comment">
                    <command>
                        <body>Debug - print arguments</body>
                    </command>
                    <nestedSteps>
                        <item guid="55438723-2761-4e35-8399-7417af73d1c9" action="eval">
                            <command>
                                <body>puts &quot;$uni_port $nni_port $svlan $cvlan $cir&quot;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="932a71b2-d393-4b0c-bc21-7c4e640addbe" action="command" session="$session">
                    <command>
                        <body>virtual-sw ethernet delete vs ERS-${svlan}-VS</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="fba7c315-7a48-4a26-8368-8359ef80bf85" action="command" session="$session">
                    <command>
                        <body>virtual-circuit ethernet delete vc ERS-${svlan}-VC</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="c1f91523-fb98-471f-88cd-152ff2c5ef4d" action="command" session="$session">
                    <command>
                        <body>vlan remove vlan ${svlan} port $uni_port</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="5f4a2def-28e1-48e3-9700-1c8db4cad151" action="command" session="$session">
                    <command>
                        <body>vlan remove vlan ${svlan} port $nni_port</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="edd756ad-ebfc-4cf3-b674-559da57eb6ed" action="command" session="$session">
                    <command>
                        <body>vlan delete vlan ${svlan}</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="afe895c3-9e6d-41eb-b807-2f16ddfc79e8" action="comment">
                    <command>
                        <body>Need to remove the existing profile attached to the port to something neutral and then remove the profile.</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="9a5eb80a-5a6d-4c1c-a788-ae182979363b" action="command" session="$session">
                    <command>
                        <body>traffic-profiling set port $uni_port arp-standard-profile bypass nonconform-standard-profile drop</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="3f0205bd-9855-4455-8913-5c2cf6e19eec" action="comment">
                    <command>
                        <body>Once the VS is deleted, it deletes the traffic profile also. So there is no need to do this here.</body>
                    </command>
                    <nestedSteps>
                        <item guid="4d15f86c-7126-4cdc-ab42-f8964b933cc4" action="command" session="$session" skip="true">
                            <command>
                                <body>traffic-pro standard-profile delete port $uni_port profile ERS-${cvlan}-${cir}M</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="f1c592bc-7fec-4280-9f14-d5167779ea9b" action="command" session="$session">
                    <command>
                        <body>traffic-profiling set port $uni_port mode standard-dot1dpri</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="0085f435-659f-446f-8d72-222d3dc856b8" action="command" session="$session">
                    <command>
                        <body>config save</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="ea371067-77f2-4e85-919a-ab3979adf04c" action="comment">
                    <command>
                        <body>**************************************************************</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="be6ebeb6-b6ce-4acf-8112-88e13f8a522d" action="comment">
                    <command>
                        <body>This procedure deletes a EWS configuration on SAOS Ciena NTE</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="6797a99e-08ab-4824-881a-f709c44972c5" action="comment">
                    <command>
                        <body>**************************************************************</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
            </steps>
            <arguments>
                <item name="uni_port"/>
                <item name="nni_port"/>
                <item name="svlan"/>
                <item name="cvlan"/>
                <item name="cir"/>
            </arguments>
        </item>
        <item name="delete_ews" isPublic="true">
            <steps>
                <item guid="faa0080d-d09c-48ce-8202-c6cd11116fad" action="comment">
                    <command>
                        <body>Debug - print arguments</body>
                    </command>
                    <nestedSteps>
                        <item guid="767fe9e9-3e6c-45b7-8091-5644b47086b3" action="eval">
                            <command>
                                <body>puts &quot;$uni_port $nni_port $svlan $cir&quot;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="ce755858-b2a1-4c9f-b3db-e6fca37e350b" action="command" session="$session">
                    <command>
                        <body>virtual-sw ethernet delete vs EWS-${svlan}-VS</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="b55550dc-b1f8-4e03-89b2-be8b5040812e" action="command" session="$session">
                    <command>
                        <body>virtual-circuit ethernet delete vc EWS-${svlan}-VC</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="6340d0e5-aa0a-4049-989d-196e579c32e4" action="command" session="$session">
                    <command>
                        <body>vlan remove vlan ${svlan} port $uni_port</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="ce8a083d-f031-4cfc-a36f-54daf00617c2" action="command" session="$session">
                    <command>
                        <body>vlan remove vlan ${svlan} port $nni_port</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="dda0d1f5-a0e1-4bc0-8af4-cf8b46d6c1fd" action="command" session="$session">
                    <command>
                        <body>vlan delete vlan ${svlan}</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="5e24a6ba-46db-4d98-920b-95299d98e989" action="command" session="$session">
                    <command>
                        <body>traffic-profiling set port $uni_port arp-standard-profile bypass nonconform-standard-profile drop</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="015a877f-c379-490a-9c15-844ad2ac292d" action="command" session="$session">
                    <command>
                        <body>traffic-pro standard-profile delete port $uni_port profile EWS-${svlan}-${cir}M</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="b7762070-b4c9-49d3-bf70-48767c478b62" action="command" session="$session">
                    <command>
                        <body>traffic-profiling set port $uni_port mode standard-dot1dpri</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="58678354-dce8-40e5-b482-5e5b08127d70" action="command" session="$session">
                    <command>
                        <body>config save</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
            </steps>
            <arguments>
                <item name="uni_port"/>
                <item name="nni_port"/>
                <item name="svlan"/>
                <item name="cir"/>
            </arguments>
        </item>
        <item name="delete_traffic_profiles_by_port" isPublic="true" defaultSessionProfile="ciena_leos_ref_telnet.ffsp">
            <steps>
                <item guid="131c39a9-7ad0-46b3-aa22-faf613202081" action="comment">
                    <command>
                        <body>Insert steps here to be executed on each loop</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="424c7eda-96a0-4299-bc13-8dbe842e069a" action="command" session="$session">
                    <command>
                        <body>traffic-profiling standard-profile show port $uni_port</body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="contains">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.ExtractorContainsPropertyGroup">
                                        <searchString>No entries found</searchString>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="assert">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                        <expression>$value == 1</expression>
                                        <actionsWhenTrue>
                                            <item actionId="Eval">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                    <statement>set traffic_profile 0</statement>
                                                </actionProperties>
                                            </item>
                                            <item actionId="DeclareExecutionIssue">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Information">
                                                    <message>No existing traffic profiles on port $uni_port</message>
                                                </actionProperties>
                                            </item>
                                            <item actionId="SkipRemainingRules">
                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            </item>
                                        </actionsWhenTrue>
                                        <actionsWhenFalse>
                                            <item actionId="DeclareExecutionIssue">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Information">
                                                    <message>Traffic profiles exist on system.  Cleanup system</message>
                                                </actionProperties>
                                            </item>
                                            <item actionId="Eval">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                    <statement>set traffic_profile 1</statement>
                                                </actionProperties>
                                            </item>
                                        </actionsWhenFalse>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query>//Profile_Name </query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="store">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                        <storageLocation>profile_names</storageLocation>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                    <advancedProperties defaultSessionProfile="ciena_ref_telnet.ffsp"/>
                </item>
                <item guid="799733ff-ce3a-41ba-96bf-19d3779368ec" action="if">
                    <command>
                        <body>$traffic_profile == 1</body>
                    </command>
                    <nestedSteps>
                        <item guid="27309ab8-6d5f-4024-b7b5-f8e93ad3335b" action="then">
                            <nestedSteps>
                                <item guid="a13617bb-ac2e-4c75-8968-70315d0aeb98" action="command" session="$session">
                                    <command>
                                        <body>vlan show port $uni_port</body>
                                    </command>
                                    <postProcessing>
                                        <analysisRules>
                                            <item>
                                                <extractorInfo extractorType="query">
                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                        <query>//VLAN</query>
                                                    </extractorProperties>
                                                </extractorInfo>
                                                <processorInfo ruleType="store">
                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                        <storageLocation>vlans</storageLocation>
                                                    </ruleProperties>
                                                </processorInfo>
                                            </item>
                                        </analysisRules>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                    <advancedProperties defaultSessionProfile="ciena_ref_telnet.ffsp"/>
                                </item>
                                <item guid="fff5f484-a9fd-4c12-8b39-140dfca6e6f8" action="foreach">
                                    <command>
                                        <body>vlan_instance $vlans</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="6d2f2a7f-7c58-4d36-8f0d-4cbed9211a6e" action="if">
                                            <command>
                                                <body>$vlan_instance != 1</body>
                                            </command>
                                            <nestedSteps>
                                                <item guid="1dc9d824-a50c-42ec-9203-a5ab62c4935a" action="then">
                                                    <nestedSteps>
                                                        <item guid="148eb90b-8323-443d-9668-c28754d54cc5" action="command" session="$session">
                                                            <command>
                                                                <body>vlan show vlan $vlan_instance</body>
                                                            </command>
                                                            <postProcessing>
                                                                <analysisRules>
                                                                    <item>
                                                                        <extractorInfo extractorType="query">
                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                <query sub="true">Nni_port(&quot;$uni_port&quot;)</query>
                                                                            </extractorProperties>
                                                                        </extractorInfo>
                                                                        <processorInfo ruleType="store">
                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                <storageLocation>nni_port</storageLocation>
                                                                            </ruleProperties>
                                                                        </processorInfo>
                                                                    </item>
                                                                </analysisRules>
                                                            </postProcessing>
                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                            <advancedProperties defaultSessionProfile="ciena_ref_telnet.ffsp"/>
                                                        </item>
                                                        <item guid="a5d9b000-213e-4885-a4f8-9cf11b75457c" action="foreach">
                                                            <command>
                                                                <body>nni_port_instance $nni_port</body>
                                                            </command>
                                                            <nestedSteps>
                                                                <item guid="400abc4c-83ec-4fc0-adea-821903506671" action="command" session="$session">
                                                                    <command>
                                                                        <body>vlan remove vlan $vlan_instance port $nni_port_instance</body>
                                                                    </command>
                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                    <advancedProperties defaultSessionProfile="ciena_ref_telnet.ffsp"/>
                                                                </item>
                                                            </nestedSteps>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                            <useFieldsInCommand>false</useFieldsInCommand>
                                                        </item>
                                                        <item guid="0b5db127-460e-4f9d-97c6-e2e881351dbb" action="command" session="$session">
                                                            <command>
                                                                <body>vlan delete vlan $vlan_instance</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                            <advancedProperties defaultSessionProfile="ciena_ref_telnet.ffsp"/>
                                                        </item>
                                                        <item guid="9bbe9e20-e826-443a-afc9-d944fa41175b" action="command" session="$session">
                                                            <command>
                                                                <body>virtual-switch ethernet show</body>
                                                            </command>
                                                            <postProcessing>
                                                                <analysisRules>
                                                                    <item>
                                                                        <extractorInfo extractorType="query">
                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                <query sub="true">virtual_switch_by_vlan(&quot;$vlan_instance&quot;)</query>
                                                                            </extractorProperties>
                                                                        </extractorInfo>
                                                                        <processorInfo ruleType="store">
                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                <storageLocation>virtual_switch_name</storageLocation>
                                                                            </ruleProperties>
                                                                        </processorInfo>
                                                                    </item>
                                                                </analysisRules>
                                                            </postProcessing>
                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                            <useFieldsInCommand>false</useFieldsInCommand>
                                                            <advancedProperties defaultSessionProfile="ciena_ref_telnet.ffsp"/>
                                                        </item>
                                                        <item guid="68cf4f2c-2671-4d92-980d-c315f3d54703" action="command" session="$session">
                                                            <command>
                                                                <body>virtual-circuit ethernet show</body>
                                                            </command>
                                                            <postProcessing>
                                                                <analysisRules>
                                                                    <item>
                                                                        <extractorInfo extractorType="query">
                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                <query sub="true">virtual_circuit_by_vlan(&quot;$vlan_instance&quot;)</query>
                                                                            </extractorProperties>
                                                                        </extractorInfo>
                                                                        <processorInfo ruleType="store">
                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                <storageLocation>virtual_circuit_name</storageLocation>
                                                                            </ruleProperties>
                                                                        </processorInfo>
                                                                    </item>
                                                                </analysisRules>
                                                            </postProcessing>
                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                            <useFieldsInCommand>false</useFieldsInCommand>
                                                            <advancedProperties defaultSessionProfile="ciena_ref_telnet.ffsp"/>
                                                        </item>
                                                        <item guid="a4d3ebd5-4d2f-4afc-9a11-3f85514ae33a" action="comment">
                                                            <command>
                                                                <body>Remove virtual_switch virtual_circuit</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                            <useFieldsInCommand>false</useFieldsInCommand>
                                                            <advancedProperties defaultSessionProfile="ciena_ref_telnet.ffsp"/>
                                                        </item>
                                                        <item guid="ddfb64c6-8a30-49ea-8a17-b3d8ec1ac5c6" action="command" session="$session">
                                                            <command>
                                                                <body>virtual-sw ethernet delete vs $virtual_switch_name</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                            <advancedProperties defaultSessionProfile="ciena_ref_telnet.ffsp"/>
                                                        </item>
                                                        <item guid="7572397e-793d-4efe-9234-2cd420474ab6" action="command" session="$session">
                                                            <command>
                                                                <body>virtual-circuit ethernet delete vc $virtual_circuit_name</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                            <advancedProperties defaultSessionProfile="ciena_ref_telnet.ffsp"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    <useFieldsInCommand>false</useFieldsInCommand>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            <useFieldsInCommand>false</useFieldsInCommand>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                                <item guid="1e8063a3-33da-4842-bd00-171f27c441fe" action="foreach">
                                    <command>
                                        <body>profile_name_instance $profile_names</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="a68d4bed-654e-4a33-9da8-e23c5bffc0fb" action="comment">
                                            <command>
                                                <body>Insert steps here to be executed on each loop</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            <useFieldsInCommand>false</useFieldsInCommand>
                                        </item>
                                        <item guid="c5120752-073a-40aa-a66c-4f03f60e580f" action="command" session="$session">
                                            <command>
                                                <body>traffic-profiling set port $uni_port arp-standard-profile bypass nonconform-standard-profile drop</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                            <advancedProperties defaultSessionProfile="ciena_ref_telnet.ffsp"/>
                                        </item>
                                        <item guid="f45c87c4-3ff9-40d2-a41b-d796559c9015" action="command" session="$session">
                                            <command>
                                                <body>traffic-pro standard-profile delete port $uni_port profile $profile_name_instance</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                            <advancedProperties defaultSessionProfile="ciena_ref_telnet.ffsp"/>
                                        </item>
                                        <item guid="4fd2e04e-ae0f-4de3-8d37-c2c24f2ae1ac" action="command" session="$session">
                                            <command>
                                                <body>traffic-profiling set port $uni_port mode standard-dot1dpri</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                            <advancedProperties defaultSessionProfile="ciena_ref_telnet.ffsp"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                    <advancedProperties defaultSessionProfile="ciena_ref_telnet.ffsp"/>
                                </item>
                                <item guid="22259225-ed9d-4a6c-ab45-f2da88b55684" action="command" session="$session">
                                    <command>
                                        <body>config save</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                    <advancedProperties defaultSessionProfile="ciena_ref_telnet.ffsp"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                        <item guid="e25c7da1-09d5-4cf0-96ff-64ab13466b08" action="else">
                            <nestedSteps>
                                <item guid="3dbbcb6d-0f40-49b9-98c0-4fb96f4220e1" action="comment">
                                    <command>
                                        <body>Insert steps here for when the expression evaluates to false</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
            </steps>
            <arguments>
                <item name="uni_port"/>
            </arguments>
        </item>
        <item name="device_login">
            <steps>
                <item guid="aa15c89a-796c-43f8-a9a4-101e9092817d" action="comment">
                    <command>
                        <body>Login to the device. These credentials are taken from the global parameter file.</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="b6733a4a-5099-4cd2-ab83-38ef23edd12b" action="command" session="$session" normalOffset="6.17" estimatedStepExecutionTime="0.344">
                    <command>
                        <body>telnet $IP</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                        <completionProperties expectedIdleTime="0.531" expectedIdleTime.inherit="false"/>
                    </applicationProperties>
                </item>
                <item guid="39dd2299-4d3a-4203-9a67-85f0a29685bf" action="command" session="$session" normalOffset="2.406" estimatedStepExecutionTime="0.141">
                    <command>
                        <body>[param device/userid]</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                        <completionProperties expectedIdleTime="0.296" expectedIdleTime.inherit="false"/>
                    </applicationProperties>
                </item>
                <item guid="5c9f2bd1-ef3d-4110-b405-44ce98c2fc85" action="command" session="$session" normalOffset="3.531" estimatedStepExecutionTime="0.157">
                    <command isEncrypted="true">
                        <body>[param device/password]</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                        <completionProperties expectedIdleTime="0.157" expectedIdleTime.inherit="false"/>
                    </applicationProperties>
                </item>
                <item guid="c4b7ef4f-474b-4198-b197-9aec0240fcf5" action="command" session="$session" normalOffset="3.531" estimatedStepExecutionTime="0.157">
                    <command>
                        <body masked="true">CaK+mWSFs84=</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                        <completionProperties expectedIdleTime="0.157" expectedIdleTime.inherit="false"/>
                    </applicationProperties>
                </item>
                <item guid="a3106241-c661-406d-80c3-889d3ff210be" action="command" session="$session" normalOffset="3.531" estimatedStepExecutionTime="0.157">
                    <command>
                        <body masked="true">CaK+mWSFs84=</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                        <completionProperties expectedIdleTime="0.157" expectedIdleTime.inherit="false"/>
                    </applicationProperties>
                </item>
            </steps>
            <arguments>
                <item name="session">
                    <isMandatory>true</isMandatory>
                </item>
                <item name="IP">
                    <description>device IP</description>
                    <isMandatory>true</isMandatory>
                </item>
            </arguments>
        </item>
        <item name="disable_cfm_service" isPublic="true">
            <steps>
                <item guid="021fc3ef-3b4e-4ede-96ee-d3743c8e9017" action="command" session="$session">
                    <command>
                        <body>cfm service disable service &quot;${md}$ma&quot;</body>
                    </command>
                    <postProcessing>
                        <responseFile inherit="false" sub="true">[gget ${session}_file]</responseFile>
                        <responseHeader inherit="false">###################################</responseHeader>
                        <appendSession inherit="false">true</appendSession>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
            </steps>
            <arguments>
                <item name="md"/>
                <item name="ma"/>
            </arguments>
        </item>
        <item name="enable_ccm" isPublic="true">
            <steps>
                <item guid="bb3ed7c2-3934-46e3-b2b1-fdd0cb058f8c" action="command" session="$session" skip="true">
                    <command>
                        <body>cfm service show service &quot;${md}serv&quot;</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="1053af0b-7a03-49f8-8383-81dad8efd9f7" action="command" session="$session" skip="true">
                    <command>
                        <body>cfm service create vlan $vlan name &quot;${md}serv&quot; md $md ma-name-string $ma</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="2e99b0ce-05e5-4aff-b139-0a470e31031d" action="command" session="$session">
                    <command>
                        <body>cfm service enable service &quot;${md}serv&quot;</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="a6be00c3-f3b9-4504-9be5-8cc40d65c115" action="command" session="$session">
                    <command>
                        <body>conf save</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
            </steps>
            <arguments>
                <item name="md"/>
                <item name="ma"/>
                <item name="vlan"/>
            </arguments>
        </item>
        <item name="enable_cfm_service" isPublic="true">
            <steps>
                <item guid="a568e6d5-889c-44a1-974e-e56060b08099" action="command" session="$session">
                    <command>
                        <body>cfm service enable service &quot;${md}$ma&quot;</body>
                    </command>
                    <postProcessing>
                        <responseFile inherit="false" sub="true">[gget ${session}_file]</responseFile>
                        <responseHeader inherit="false">###################################</responseHeader>
                        <appendSession inherit="false">true</appendSession>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
            </steps>
            <arguments>
                <item name="md"/>
                <item name="ma"/>
            </arguments>
        </item>
        <item name="ethernet_ping" isPublic="true">
            <steps>
                <item guid="34293701-6cf7-494f-af01-ce4ff35751e7" action="comment">
                    <command>
                        <body>cfm loop send service &quot;${md}$ma&quot; local mep_id mep target_mep_id c 10</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="5c8da7a6-864a-4143-b466-6c65e1d21399" action="if">
                    <command>
                        <body>$log_report</body>
                    </command>
                    <nestedSteps>
                        <item guid="58cb2696-c87b-4fc3-936d-22bcdf9cb2b2" action="then">
                            <nestedSteps>
                                <item guid="8549907b-1867-4f3a-a23d-ecabda0058ff" action="command" session="$session">
                                    <command>
                                        <body>cfm loopback send service &quot;${md}$ma&quot; local $source_mep_id mep $destination_mep_id c $count interval $ping_interval priority $priority</body>
                                    </command>
                                    <postProcessing>
                                        <responseFile inherit="false" sub="true">[gget ${session}_file]</responseFile>
                                        <responseHeader inherit="false">###################################</responseHeader>
                                        <appendSession inherit="false">true</appendSession>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                                <item guid="1a210e8d-4815-4867-81d5-3a31cbf64b23" action="eval">
                                    <command>
                                        <body>set delay [expr [expr [expr $count * $ping_interval] / 1000] + 5]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                                <item guid="46ad4e57-6b3e-4d1a-b418-cc0d576909be" action="sleep">
                                    <command>
                                        <body>$delay</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="ef7c2a13-0e5c-4685-a055-0c227a05d967" action="command" session="$session">
                                    <command>
                                        <body>cfm loop show service &quot;${md}$ma&quot;</body>
                                    </command>
                                    <postProcessing>
                                        <storeResponseAt>ping_results</storeResponseAt>
                                        <responseFile inherit="false" sub="true">[gget ${session}_file]</responseFile>
                                        <responseHeader inherit="false">###################################</responseHeader>
                                        <appendSession inherit="false">true</appendSession>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                        <item guid="a782557a-3195-4815-865e-c8015c1f1de6" action="else">
                            <nestedSteps>
                                <item guid="042dac18-aa9c-4fec-a126-8abd46d028ad" action="command" session="$session">
                                    <command>
                                        <body>cfm loopback send service &quot;${md}$ma&quot; local $source_mep_id mep $destination_mep_id c $count interval $ping_interval priority $priority</body>
                                    </command>
                                    <postProcessing>
                                        <appendSession inherit="false" defaultValue=""/>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                                <item guid="1423b98d-2256-4da0-b01f-e3ce4f6dcf36" action="eval">
                                    <command>
                                        <body>set delay [expr [expr [expr $count * $ping_interval] / 1000] + 5]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                                <item guid="d4293267-8d92-41a4-bcaf-c538aa5455ce" action="sleep">
                                    <command>
                                        <body>$delay</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="96fb7523-cf98-46c9-b219-a5a7cadf075b" action="command" session="$session">
                                    <command>
                                        <body>cfm loop show service &quot;${md}$ma&quot;</body>
                                    </command>
                                    <postProcessing>
                                        <storeResponseAt>ping_results</storeResponseAt>
                                        <appendSession inherit="false" defaultValue=""/>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="fbe0804e-6ab7-4695-967e-10d21b7f37da" action="eval">
                    <command>
                        <body>set rate [expr $count - [expr [expr [query ping_results Io(1)] + [query ping_results Ooo(1)]] + [query ping_results Con(1)]]]</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="4953451f-326a-4ac8-b8df-2818cca16abe" action="eval">
                    <command>
                        <body>set rate1 [expr [format &quot;%0.2f&quot; [expr $count - $rate]] / [format &quot;%0.2f&quot; $count]]</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="2b90f026-59ee-4b49-8f58-73aef10bddf5" action="eval">
                    <command>
                        <body>set rate2 [expr $rate1 * 100]</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="76d08291-702d-4bc3-99d6-2b264d998678" action="write">
                    <command>
                        <body>Success rate is $rate2 %</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <arguments>
                <item name="md"/>
                <item name="ma"/>
                <item name="source_mep_id"/>
                <item name="destination_mep_id"/>
                <item name="count"/>
                <item name="ping_interval"/>
                <item name="priority"/>
                <item name="log_report">
                    <defaultValue>0</defaultValue>
                </item>
            </arguments>
        </item>
        <item name="getCBS" isPublic="true">
            <steps>
                <item guid="2f2caf50-07d4-4d51-8c0e-b6e2fc8dd884" action="readFile" useResponseMapLibraryApplicability="false">
                    <command>
                        <body>project://di_ciena/library/jumpTable.csv</body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query sub="true">cbs_by_nt_and_range(&quot;$NT&quot;,&quot;$CIR&quot;)</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="store">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                        <storageLocation>CBS</storageLocation>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.execution.builtin.exec.ReadFilePropertyGroup"/>
                    <responseMap>project://di_ciena/response_maps/jump_table.ffrm</responseMap>
                    <useResponseMapLibraryFromSession>false</useResponseMapLibraryFromSession>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="28b686b5-3be8-4d35-ada8-7db4efc980a0" action="return">
                    <command>
                        <body>$CBS</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <arguments>
                <item name="NT">
                    <description>This is the type of Ciena device i.e. 3930, 3931, 3960, 3911 etc.</description>
                    <isMandatory>true</isMandatory>
                </item>
                <item name="CIR">
                    <isMandatory>true</isMandatory>
                </item>
            </arguments>
        </item>
        <item name="get_port_stats" isPublic="true">
            <steps>
                <item guid="aba1ae22-54d3-4aaf-8ac2-79d058c7a323" action="comment">
                    <command>
                        <body>TxPkts and RxPkts returns for Unicast Pkts; Unicast is not shown in response</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="126340b5-593a-4f9d-a145-dbf85f1745f6" action="command" session="$session">
                    <command>
                        <body>port show port $port statistics</body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query>value_by_parameter(&quot;RxPkts&quot;)</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="store">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                        <storageLocation>nte_rx_frames</storageLocation>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query>value_by_parameter(&quot;TxPkts&quot;)</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="store">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                        <storageLocation>nte_tx_frames</storageLocation>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query>value_by_parameter(&quot;TxPkts&quot;)</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="store">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                        <storageLocation>tx_unicast</storageLocation>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query>value_by_parameter(&quot;RxPkts&quot;)</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="store">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                        <storageLocation>rx_unicast</storageLocation>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query>value_by_parameter(&quot;TxMcastPkts&quot;)</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="store">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                        <storageLocation>tx_mcast</storageLocation>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query>value_by_parameter(&quot;RxMcastPkts&quot;)</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="store">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                        <storageLocation>rx_mcast</storageLocation>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="d019add2-33ee-4607-97e3-39dfa5b87654" action="write">
                    <command>
                        <body>port_TX = $nte_tx_frames \\r\\n</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="e09d3ecc-68b9-41d9-96ad-2f2caa7e9efb" action="write">
                    <command>
                        <body>port_RX = $nte_rx_frames \\r\\n</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="f39ac594-c782-4527-bf58-34c9d922d695" action="write">
                    <command>
                        <body>port_UniTX = $tx_unicast \\r\\n</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="1f9bee76-043b-4e48-aeb6-150ae52d3ba8" action="write">
                    <command>
                        <body>port_UniRX = $rx_unicast \\r\\n</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="b3b11a8f-98e4-476b-b5c7-6ff974593018" action="write">
                    <command>
                        <body>port_MultiTX = $tx_mcast \\r\\n</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="6cc210a7-bef7-4fce-8176-27efd46d6c5b" action="write">
                    <command>
                        <body>port_MultiRX = $rx_mcast \\r\\n</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="60dfa838-26e6-438a-ac6c-5f4274556fad" action="write">
                    <command>
                        <body>port_GrnDrop = NA \\r\\n</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <arguments>
                <item name="port">
                    <isMandatory>true</isMandatory>
                </item>
            </arguments>
        </item>
        <item name="get_traffic_profiling_stats" isPublic="true">
            <steps>
                <item guid="1ccefcf0-9bc0-4668-b59d-3a4424ff362b" action="command" session="$session">
                    <command>
                        <body>traffic-profiling standard-profile show statistics port $port</body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query sub="true">Accepted_by_Port_and_ProfileName($port, &quot;$profile_name&quot;)</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="store">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                        <storageLocation>accepted</storageLocation>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query sub="true">Dropped_by_Port_and_ProfileName($port, &quot;$profile_name&quot;)</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="store">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                        <storageLocation>dropped</storageLocation>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                        <storeResponseAt>traffic_profiling</storeResponseAt>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                        <morePaging>
                            <numPagesToFetch inherit="false">500</numPagesToFetch>
                            <removeMoreLine inherit="false" defaultValue=""/>
                        </morePaging>
                    </applicationProperties>
                </item>
                <item guid="07f0c3e8-d093-4b9b-a538-7d60615b375f" action="write">
                    <command>
                        <body>ingress_GrnTotal = $accepted \\r\\n</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="d2a5510f-0539-4bac-8b5e-4e5e1d27975f" action="write">
                    <command>
                        <body>ingress_Red = $dropped \\r\\n</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <arguments>
                <item name="port">
                    <isMandatory>true</isMandatory>
                </item>
                <item name="profile_name">
                    <isMandatory>true</isMandatory>
                </item>
            </arguments>
        </item>
        <item name="get_tx_rx_stats" isPublic="true" defaultSessionProfile="ciena_leos_ref_telnet.ffsp">
            <steps>
                <item guid="18aab5ae-3059-4e51-b236-663ab9820fb5" action="command" session="$session">
                    <command>
                        <body>port show port $port statistics</body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query>rx_pkts()</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="store">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                        <storageLocation>nte_rx_frames</storageLocation>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query>tx_pkts()</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="store">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                        <storageLocation>nte_tx_frames</storageLocation>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query>tx_ucast_pkts()</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="store">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                        <storageLocation>tx_unicast</storageLocation>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query>rx_ucast_pkts()</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="store">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                        <storageLocation>rx_unicast</storageLocation>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query>tx_mcast_pkts()</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="store">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                        <storageLocation>tx_mcast</storageLocation>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query>rx_mcast_pkts()</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="store">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                        <storageLocation>rx_mcast</storageLocation>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="a078a9bd-7689-4071-9677-a7ec743830cb" action="command" session="$session">
                    <command>
                        <body>traffic-profiling standard-profile show statistics port $port</body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query sub="true">Accepted_by_Port_and_ProfileName($port, &quot;$profile_name&quot;)</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="store">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                        <storageLocation>accepted</storageLocation>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query sub="true">Dropped_by_Port_and_ProfileName($port, &quot;$profile_name&quot;)</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="store">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                        <storageLocation>dropped</storageLocation>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                        <storeResponseAt>traffic_profiling</storeResponseAt>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                        <morePaging>
                            <numPagesToFetch inherit="false">500</numPagesToFetch>
                            <removeMoreLine inherit="false" defaultValue=""/>
                        </morePaging>
                    </applicationProperties>
                </item>
                <item guid="d14fdfcd-fa73-4b06-b7cd-f71306fe5cdb" action="comment">
                    <command>
                        <body>Write the stats to the output of the QC</body>
                    </command>
                    <nestedSteps>
                        <item guid="4d3ac88d-6ace-4765-9531-249b993e3e7e" action="write">
                            <command>
                                <body>nte_tx_frames = $nte_tx_frames \\r\\n</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="d3a840c5-a54c-4c57-a1a9-68108123d6ad" action="write">
                            <command>
                                <body>nte_rx_frames = $nte_rx_frames \\r\\n</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="04489ca9-c6d9-488d-810d-03d3c4e6e478" action="write">
                            <command>
                                <body>tx_unicast = $tx_unicast \\r\\n</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="f596a243-3c06-4069-80d5-0d905ed9fb51" action="write">
                            <command>
                                <body>rx_unicast = $rx_unicast \\r\\n</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="970d79a1-fc78-477b-a5b5-89f91cb12c0f" action="write">
                            <command>
                                <body>tx_multicast = $tx_mcast \\r\\n</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="2af8d951-10b4-4e00-8bf1-0b897d4a57e0" action="write">
                            <command>
                                <body>rx_multicast = $rx_mcast \\r\\n</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="b4421e48-0a8b-4fd9-b45f-d7e802120570" action="write">
                            <command>
                                <body>ingress_green_drop = NA \\r\\n</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="bc4b1178-449d-41b2-8f95-985bc08ed946" action="write">
                            <command>
                                <body>ingress_green_total = $accepted \\r\\n</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="10948a3a-eda9-4aab-81f3-21214a89fc09" action="write">
                            <command>
                                <body>ingress_red_frames = $dropped \\r\\n</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
            </steps>
            <arguments>
                <item name="port"/>
                <item name="profile_name"/>
            </arguments>
        </item>
        <item name="get_version" isPublic="true" defaultSessionProfile="ciena_leos_ref_telnet.ffsp">
            <steps>
                <item guid="d75506fd-dbd1-4142-a1a0-70f1a0a39cec" action="comment">
                    <command>
                        <body>******************************************************</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="86ce5394-b4f2-4cf8-a2b6-1d57f2667443" action="comment">
                    <command>
                        <body>* Procedure to return the nte hostname and software version</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="3b6e667a-97e6-4703-ab67-93c407d899a5" action="comment">
                    <command>
                        <body>******************************************************</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="2c0f4e0b-c32c-45cd-a6b6-6e1bae007eb7" action="command" session="$session">
                    <command>
                        <body>system show host-name</body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="regex">
                                    <extractorProperties type="com.fnfr.svt.mapping.regex.extractors.RegexExtractorPropertyGroup" useLineMode="true">
                                        <regex>^\\| Oper \\|\\s+(\\S+)\\s+\\|$</regex>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="store">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                        <storageLocation>host_name</storageLocation>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="e735b51e-503b-441f-84a4-fd44f5235c16" action="command" session="$session">
                    <command>
                        <body>software show</body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query>installed_package()</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="store">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                        <storageLocation>version</storageLocation>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                    <responseMap>project://dsl_shared_resources/ciena/response_maps/so_show_saos.ffrm</responseMap>
                </item>
                <item guid="68e8fc54-fabf-472b-9915-2f926f347927" action="write">
                    <command>
                        <body>${host_name}: $version</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
        </item>
        <item name="login" isPublic="true" isVBlock="true">
            <steps>
                <item guid="ed5bd14c-3161-4800-a3c4-b6e29875716e" action="comment">
                    <command>
                        <body>This is the login procedure</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="9f140053-3740-41d7-94a1-4c6a24b1e087" action="comment">
                    <command>
                        <body>This procedure determines if the open is for the TACACS server (Acme_NOC). </body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="811bcd90-d3ee-4db6-a3b7-88d3350f3b70" action="comment">
                    <command>
                        <body>If so it logs in and then telnet&apos;s to the device. If not, the login is to the device directly.</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="83a1343c-fe47-4f15-97b6-1e1d02a6349c" action="comment">
                    <command>
                        <body>Debug - print arguments</body>
                    </command>
                    <nestedSteps>
                        <item guid="fb375545-6ab1-4484-8a1d-af544c024a46" action="eval">
                            <command>
                                <body>puts &quot;$ip $userid $password&quot;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="072223f6-d4d0-4831-8c9f-1c8d3a69e255" action="command" session="$session" skip="true">
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query>prompt()</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="assert">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                        <expression>$value eq &quot;Acme NOC:&quot;</expression>
                                        <actionsWhenTrue>
                                            <item actionId="DeclareExecutionIssue">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                    <message> Hit Acme_NOC</message>
                                                </actionProperties>
                                            </item>
                                            <item actionId="CallProcedure">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.CallProcedurePropertyGroup">
                                                    <command>noc_login</command>
                                                </actionProperties>
                                            </item>
                                            <item actionId="CallProcedure">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.CallProcedurePropertyGroup">
                                                    <command>device_login -session $session -userid $userid -password $password</command>
                                                </actionProperties>
                                            </item>
                                            <item actionId="SkipRemainingRules">
                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            </item>
                                        </actionsWhenTrue>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query>promptName</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="assert">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                        <expression>$value == &quot;login&quot; || $value == &quot;username&quot;</expression>
                                        <actionsWhenTrue>
                                            <item actionId="DeclareExecutionIssue">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                    <message> Device Login: $session</message>
                                                </actionProperties>
                                            </item>
                                            <item actionId="CallProcedure">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.CallProcedurePropertyGroup">
                                                    <command>send_login -session $session -userid $userid -password $password</command>
                                                </actionProperties>
                                            </item>
                                        </actionsWhenTrue>
                                        <actionsWhenFalse>
                                            <item actionId="DeclareExecutionIssue">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Information">
                                                    <message> No match on prompt $value</message>
                                                </actionProperties>
                                            </item>
                                        </actionsWhenFalse>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="84b89bb2-9e9f-45ce-af30-576cc8de3767" action="command" session="$session">
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query>prompt()</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="assert">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                        <expression>$value eq &quot;Acme NOC:&quot;</expression>
                                        <actionsWhenTrue>
                                            <item actionId="DeclareExecutionIssue">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                    <message> Hit Acme_NOC</message>
                                                </actionProperties>
                                            </item>
                                            <item actionId="CallProcedure">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.CallProcedurePropertyGroup">
                                                    <command>noc_login</command>
                                                </actionProperties>
                                            </item>
                                            <item actionId="CallProcedure">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.CallProcedurePropertyGroup">
                                                    <command>device_login -session $session -userid $userid -password $password</command>
                                                </actionProperties>
                                            </item>
                                            <item actionId="SkipRemainingRules">
                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            </item>
                                        </actionsWhenTrue>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query>promptName</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="assert">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                        <expression>$value == &quot;login&quot; || $value == &quot;username&quot; || $value == &quot;Username&quot; </expression>
                                        <actionsWhenTrue>
                                            <item actionId="Eval">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                    <statement>set continue_login 1</statement>
                                                </actionProperties>
                                            </item>
                                        </actionsWhenTrue>
                                        <actionsWhenFalse>
                                            <item actionId="DeclareExecutionIssue">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Information">
                                                    <message> Did not receive login prompt. Prompt: $value</message>
                                                </actionProperties>
                                            </item>
                                            <item actionId="Eval">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                    <statement>set continue_login 0</statement>
                                                </actionProperties>
                                            </item>
                                        </actionsWhenFalse>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="21a40cde-f95b-4298-8129-fc029fe5721e" action="if">
                    <command>
                        <body>$continue_login</body>
                    </command>
                    <nestedSteps>
                        <item guid="e8419579-1b3b-47f2-891f-3c561338d466" action="then">
                            <nestedSteps>
                                <item guid="ab427d43-f619-4657-9e73-dc5548569c7b" action="comment">
                                    <command>
                                        <body>Continue the login - send credentials and return the prompt</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                                <item guid="cf5bcde8-6092-4dd2-b033-93661d7012fc" action="call">
                                    <command>
                                        <body>send_login -session $session -userid $userid -password $password</body>
                                    </command>
                                    <postProcessing>
                                        <analysisRules>
                                            <item>
                                                <extractorInfo extractorType="query">
                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                        <query>mapped/Json/promptname</query>
                                                    </extractorProperties>
                                                </extractorInfo>
                                                <processorInfo ruleType="store">
                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                        <storageLocation>var1</storageLocation>
                                                        <query>[return promptname]</query>
                                                    </ruleProperties>
                                                </processorInfo>
                                            </item>
                                        </analysisRules>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                        <item guid="2f88e758-a88f-4e8f-806f-f94f9fb5a74e" action="else">
                            <nestedSteps>
                                <item guid="041c9f85-b159-4b2d-a08d-59dd85b86d9a" action="eval">
                                    <command>
                                        <body>puts &quot;Login Failed&quot;</body>
                                    </command>
                                    <postProcessing>
                                        <analysisRules>
                                            <item>
                                                <extractorInfo extractorType="regex">
                                                    <extractorProperties type="com.fnfr.svt.mapping.regex.extractors.RegexExtractorPropertyGroup" useLineMode="true">
                                                        <regex>^Login Failed$</regex>
                                                        <extractionGroupIndex>0</extractionGroupIndex>
                                                    </extractorProperties>
                                                </extractorInfo>
                                                <processorInfo ruleType="store">
                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                        <storageLocation>var1</storageLocation>
                                                        <query>[return promptname]</query>
                                                    </ruleProperties>
                                                </processorInfo>
                                            </item>
                                        </analysisRules>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
            </steps>
            <multilineDescription>Check the prompt to determine if login is through a hop-off server (Acme NOC).
Then call appropriate login procedure.
References the global LOGIN_SUCCESSFUL created and set by send_login.</multilineDescription>
            <arguments>
                <item name="userid">
                    <isMandatory>true</isMandatory>
                </item>
                <item name="password">
                    <isMandatory>true</isMandatory>
                </item>
                <item name="ip">
                    <description>If logging in through the NOC then the IP of the destination is required</description>
                </item>
            </arguments>
            <response>{&quot;promptname&quot;:&quot;value&quot;}</response>
        </item>
        <item name="remove_cfm_service_mep" isPublic="true">
            <steps>
                <item guid="5cbfc1f8-f311-43d6-8653-52788ae49c20" action="command" session="$session">
                    <command>
                        <body>cfm mep delete service &quot;${md}serv&quot; mep $mep_id</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="53a2266e-3322-44a8-9ddd-2a9bdcf49ebe" action="command" session="$session">
                    <command>
                        <body>conf save</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="de589d7e-84bf-4ca2-9946-803037b9a2ce" action="return">
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
            <arguments>
                <item name="md"/>
                <item name="ma"/>
                <item name="mep_id"/>
            </arguments>
        </item>
        <item name="remove_mep" isPublic="true">
            <steps>
                <item guid="d46d9819-3aad-4494-a55c-1551052337f7" action="comment">
                    <command>
                        <body> cfm mep delete service vpls:2980-4serv mep 1030</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="72855d07-bef5-40de-9141-9c98bd94f4ef" action="command" session="$session">
                    <command>
                        <body>cfm mep delete service &quot;${md}serv&quot; mepid $mep_id</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
            </steps>
            <arguments>
                <item name="md"/>
                <item name="ma"/>
                <item name="level"/>
                <item name="ccm_interval"/>
                <item name="component"/>
                <item name="vlan"/>
                <item name="port"/>
                <item name="interface">
                    <defaultValue>2</defaultValue>
                </item>
                <item name="mep_id"/>
                <item name="up_down_status">
                    <defaultValue>up</defaultValue>
                </item>
                <item name="ccm_priority">
                    <defaultValue>6</defaultValue>
                </item>
            </arguments>
        </item>
        <item name="send_login" isPublic="true" isVBlock="true">
            <description>Quickcall for Juniper login</description>
            <steps>
                <item guid="9dd793ed-951f-465e-a678-66e6b978ede9" action="comment">
                    <command>
                        <body>Send userid, password to the session</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="1e1fe39e-4b30-4f27-98cf-1aa471eadc0f" action="comment">
                    <command>
                        <body>Debug - print arguments</body>
                    </command>
                    <nestedSteps>
                        <item guid="fbfeb50f-57e9-443e-b6ab-69e2575c2665" action="eval">
                            <command>
                                <body>puts &quot;$session $userid $password&quot;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="8110ef7f-f418-4e83-ba02-91a1670bb5c4" action="comment">
                    <command>
                        <body>If authentication times out repeat up to 3 times</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="388e75d1-43af-46e8-93f9-34e958923afc" action="for">
                    <command>
                        <body>{set tries 1} {$tries &lt;= 2} {incr tries}</body>
                    </command>
                    <nestedSteps>
                        <item guid="c5ba50b7-5ce9-41e0-9438-e663b6a2f576" action="command" session="$session">
                            <command>
                                <body>$userid</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                        </item>
                        <item guid="83e6c8e9-603f-4d07-8d58-22ab3d8165b3" action="command" session="$session">
                            <command>
                                <body masked="true">CNDluA9EJ23wammPrSnywg==</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="contains">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.ExtractorContainsPropertyGroup">
                                                <searchString>The system is low on memory.</searchString>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="assert">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                <expression>$value == 1</expression>
                                                <actionsWhenTrue>
                                                    <item actionId="DeclareExecutionIssue">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                            <message> Cannot login  $session : The system is low on memor</message>
                                                        </actionProperties>
                                                    </item>
                                                    <item actionId="Eval">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                            <statement>set login_failed 1</statement>
                                                        </actionProperties>
                                                    </item>
                                                    <item actionId="Break">
                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    </item>
                                                    <item actionId="SkipRemainingRules">
                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    </item>
                                                </actionsWhenTrue>
                                                <actionsWhenFalse>
                                                    <item actionId="Eval">
                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.EvalActionPropertyGroup">
                                                            <statement>set login_failed 0</statement>
                                                        </actionProperties>
                                                    </item>
                                                </actionsWhenFalse>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query>promptName()</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="assert">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                <expression>[string match normal $value]  ||  [string match private $value]</expression>
                                                <actionsWhenTrue>
                                                    <item actionId="Break">
                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    </item>
                                                </actionsWhenTrue>
                                                <actionsWhenFalse>
                                                    <item actionId="SkipRemainingRules">
                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                    </item>
                                                </actionsWhenFalse>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query>promptName()</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="store">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                <storageLocation>var1</storageLocation>
                                                <query>[return promptname]</query>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                <completionProperties expectedIdleTime="10.0" expectedIdleTime.inherit="false">
                                    <idleChannel inherit="false">1000</idleChannel>
                                </completionProperties>
                            </applicationProperties>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="898dc619-38a8-47f1-a8e4-0c4dd1047e7e" action="comment">
                    <command>
                        <body>If we retried and can&apos;t login set failure</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="5e904ff1-ac38-40d3-8681-46b86e84e130" action="if">
                    <command>
                        <body>$tries == 3 || $login_failed</body>
                    </command>
                    <nestedSteps>
                        <item guid="b91ebba5-3661-4e83-874a-a313787c7dc3" action="then">
                            <nestedSteps>
                                <item guid="c8d620fa-b4ce-4f87-b2d6-13ed3627ae52" action="comment">
                                    <command>
                                        <body>Login failed</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                                <item guid="69a0768a-ba76-4995-baca-13c2e9a63f65" action="eval">
                                    <command>
                                        <body>puts &quot;Login Failed&quot;</body>
                                    </command>
                                    <postProcessing>
                                        <analysisRules>
                                            <item>
                                                <extractorInfo extractorType="regex">
                                                    <extractorProperties type="com.fnfr.svt.mapping.regex.extractors.RegexExtractorPropertyGroup" useLineMode="true">
                                                        <regex>^Login Failed$</regex>
                                                        <extractionGroupIndex>0</extractionGroupIndex>
                                                    </extractorProperties>
                                                </extractorInfo>
                                                <processorInfo ruleType="store">
                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                        <storageLocation>var1</storageLocation>
                                                        <query>[return promptname]</query>
                                                    </ruleProperties>
                                                </processorInfo>
                                            </item>
                                        </analysisRules>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                    <useFieldsInCommand>false</useFieldsInCommand>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            <useFieldsInCommand>false</useFieldsInCommand>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
            </steps>
            <multilineDescription>Quick call for Juniper devices through the Acme NOC
Creates and sets the global variable LOGIN_SUCCESSFUL. This is passed out of login() via write action</multilineDescription>
            <arguments>
                <item name="session">
                    <isMandatory>true</isMandatory>
                </item>
                <item name="userid">
                    <isMandatory>true</isMandatory>
                </item>
                <item name="password">
                    <isMandatory>true</isMandatory>
                </item>
            </arguments>
            <response>{&quot;promptname&quot;:&quot;value&quot;}</response>
        </item>
        <item name="set_cfm_domain" isPublic="true">
            <steps>
                <item guid="73716600-f006-40e2-a504-d09f1c8b0517" action="command" session="$session">
                    <command>
                        <body>cfm md set md ${md} name ${new_md}</body>
                    </command>
                    <postProcessing>
                        <responseFile inherit="false" sub="true">[gget ${session}_file]</responseFile>
                        <responseHeader inherit="false">###################################</responseHeader>
                        <appendSession inherit="false">true</appendSession>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
            </steps>
            <arguments>
                <item name="md"/>
                <item name="new_md"/>
            </arguments>
        </item>
        <item name="set_cfm_domain_level" isPublic="true">
            <steps>
                <item guid="2ab8f3dd-1bdd-42ee-a0ae-bbab4ad57874" action="command" session="$session">
                    <command>
                        <body>cfm md set md ${md} level $level</body>
                    </command>
                    <postProcessing>
                        <responseFile inherit="false" sub="true">[gget ${session}_file]</responseFile>
                        <responseHeader inherit="false">###################################</responseHeader>
                        <appendSession inherit="false">true</appendSession>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
            </steps>
            <arguments>
                <item name="md"/>
                <item name="level"/>
            </arguments>
        </item>
        <item name="set_cfm_service_ma" isPublic="true">
            <steps>
                <item guid="b5ad5ad5-561f-4dca-8e2c-0e79d459768a" action="command" session="$session">
                    <command>
                        <body>cfm service set service &quot;${md}$old_ma&quot; ma-name-string $ma</body>
                    </command>
                    <postProcessing>
                        <responseFile inherit="false" sub="true">[gget ${session}_file]</responseFile>
                        <responseHeader inherit="false">###################################</responseHeader>
                        <appendSession inherit="false">true</appendSession>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
            </steps>
            <arguments>
                <item name="md"/>
                <item name="ma"/>
                <item name="old_ma"/>
            </arguments>
        </item>
        <item name="shut_down_ccm" isPublic="true">
            <steps>
                <item guid="10ad5f0b-909a-4150-87a1-87e0239003e2" action="command" session="$session">
                    <command>
                        <body>cfm service disable service &quot;${md}serv&quot;</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="5d236fac-ce22-47b2-adf7-5944b3733e92" action="command" session="$session" skip="true">
                    <command>
                        <body>cfm md delete md $md</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="ac41bace-1682-4109-aead-6301cf93ed53" action="command" session="$session">
                    <command>
                        <body>conf save</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
            </steps>
            <arguments>
                <item name="md"/>
                <item name="interface"/>
                <item name="ma"/>
            </arguments>
        </item>
        <item name="verify_version" isPublic="true" defaultSessionProfile="ciena_leos_ref_telnet.ffsp">
            <steps>
                <item guid="c1f25363-165f-44c7-a13d-cbf211028fbd" action="comment">
                    <command>
                        <body>******************************************************</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="bcb2a979-30fd-417e-9f84-324738dac454" action="comment">
                    <command>
                        <body>* Procedure to verify the version on the ciena nte. It  verifies</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="e8c1e74c-80ea-436e-8858-eb487b2bb362" action="comment">
                    <command>
                        <body>* that the version running on it is what is required (in the global</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="a75a6977-a097-4038-84b7-d6e1c9d7d852" action="comment">
                    <command>
                        <body>* parameter file.</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="660572df-20ec-447a-b16c-7cece73d95e4" action="comment">
                    <command>
                        <body>******************************************************</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="6872e9ac-2b26-45f4-84c1-12cbe247ffac" action="eval">
                    <command>
                        <body>set ciena_version_running [param NTE_LEOS/ciena]</body>
                    </command>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                    <useFieldsInCommand>false</useFieldsInCommand>
                </item>
                <item guid="21eb46d2-3d9a-473d-8d79-4b5597ff0e6b" action="command" session="$session">
                    <command>
                        <body>system show host-name</body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="regex">
                                    <extractorProperties type="com.fnfr.svt.mapping.regex.extractors.RegexExtractorPropertyGroup" useLineMode="true">
                                        <regex>^\\| Oper \\|\\s+(\\S+)\\s+\\|$</regex>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="store">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                        <storageLocation>ciena_host_name</storageLocation>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                </item>
                <item guid="de8329d4-331f-4d4d-9e51-f35484298932" action="command" session="$session">
                    <command>
                        <body>software show</body>
                    </command>
                    <postProcessing>
                        <analysisRules>
                            <item>
                                <extractorInfo extractorType="query">
                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                        <query>Installed_Package()</query>
                                    </extractorProperties>
                                </extractorInfo>
                                <processorInfo ruleType="assert">
                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                        <expression>$value eq $ciena_version_running</expression>
                                        <actionsWhenTrue>
                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            </item>
                                            <item actionId="DeclareExecutionIssue">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                    <message>The correct version ($ciena_version_running) is running on $ciena_host_name.</message>
                                                </actionProperties>
                                            </item>
                                        </actionsWhenTrue>
                                        <actionsWhenFalse>
                                            <item actionId="FailTest">
                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                            </item>
                                            <item actionId="DeclareExecutionIssue">
                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                    <message>{auto_message_false}</message>
                                                </actionProperties>
                                            </item>
                                        </actionsWhenFalse>
                                    </ruleProperties>
                                </processorInfo>
                            </item>
                        </analysisRules>
                    </postProcessing>
                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                    <responseMap>project://dsl_shared_resources/ciena/response_maps/so_show_saos.ffrm</responseMap>
                </item>
            </steps>
        </item>
    </procedures>
</testCase>
